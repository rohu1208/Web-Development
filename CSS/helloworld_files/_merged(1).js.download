var topBar,socialNetwork;function wwwelopers_topbar(e,t){this.pagetype=e,this.context=[],this.data="",this.coursesTags=null,this.coursesSubscriptions=null,this.timerInterval=18e4,this.timesNotificationsHasFailed=0,this.timer="",this.inactivityWatcherInterval=null,this.secondsSinceLastActivity=0,this.secondsBeforeInactive=300,this.inactivityWatcher=null,this.isInstructor=!!(me&&me.isInstructorIn&&me.isInstructorIn.length>0),this.isAffiliate=me&&me.isAffiliate,this.isSegment=me&&isParentRoleSegment(),this.isAuthor=me&&(isParentRoleLwAdmin()||isParentRoleAdmin()),this.isInstructorIn={},this.isInstructor&&this.initInstructorCourses(),this.notificationsLoaded=!1,this.refresh=!1,this.initCallback=t,this.pagesSettings={starting:{disabled:["barSearch","barSocial"],rightbuttons:[],titleBar:"<span class='-app-name'>"+LWTranslate.get("common.welcome")+",&nbsp;</span><span id='userName'></span>",authoring:!1},ebook:{disabled:["barSearch"],rightbuttons:["contents","bookmark","settings"],titleBar:"<a id='gt_contents' href='javascript:void(0);' onmousedown='cancelBubbling(event)' onclick='pagesObj.showContents()' class='white-link top-contents-link' title='Course contents'><span id='eBookChapter' class='title-item'></span></a>",authoring:!1},"path-player":{disabled:["barSearch"],rightbuttons:"none",titleBar:"<span class='-app-name'>"+LWTranslate.get("common.course")+",&nbsp;</span><span id='courseName'></span>",authoring:!1},ivideo:{disabled:["barSearch"],rightbuttons:["ivideocontents"],titleBar:"<a id='gt_contents' href='javascript:void(0);' onmousedown='cancelBubbling(event)' onclick='vplayer.showContents($(event))' class='white-link top-contents-link' title='Course contents'><span id='videoName'></span></a>",authoring:!1},inbox:{disabled:["barInbox","barSearch","barSocial"],rightbuttons:["newmessage"],titleBar:"<span class='-app-name'>"+LWTranslate.get("common.inbox")+"</span><span class='inbox-app-title-comma'>,&nbsp;</span><span id='conversationWith'></span><span id='otherUser'></span>",authoring:!1},social:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>"+LWTranslate.get("common.socialize")+",&nbsp;</span><span id='indication'></span>",authoring:!1},communityAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Socialize Authoring</span>",authoring:!0},profile:{disabled:["barSearch","barSocial"],rightbuttons:["barPeopleSearch"],titleBar:"<span class='-app-name'>"+LWTranslate.get("common.profile")+",&nbsp;</span><span id='userName'></span>",authoring:!1},people:{disabled:["barSearch","barSocial"],rightbuttons:["barPeopleSearch"],titleBar:"<span class='-app-name'>"+LWTranslate.get("common.people")+"</span>",authoring:!1},dailynews:{disabled:["barSearch"],rightbuttons:[],titleBar:"<span class='-app-name'>"+LWTranslate.get("common.daily_news")+"</span>",authoring:!1},course:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>"+LWTranslate.get("common.course")+",&nbsp;</span><span id='courseName'></span>",authoring:!1},bundles:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>"+LWTranslate.get("common.bundle")+",&nbsp;</span><span id='courseName'></span>",authoring:!1},page:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'></span><span id='courseName'></span>",authoring:!1},subscriptions:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>"+LWTranslate.get("common.subscription")+",&nbsp;</span><span id='courseName'></span>",authoring:!1},workpad:{disabled:["barSearch"],rightbuttons:"none",titleBar:"<span class='-app-name'>"+LWTranslate.get("common.best_resources")+"</span><span id='workpadTitle'></span>",authoring:!1},pagesEditor:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Build Page</span>",authoring:!0},pagesPreview:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Preview your Page</span>",authoring:!0},courseAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Edit Course &nbsp;</span>",authoring:!0},gradebook:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Gradebook,&nbsp;</span><span id='courseName'></span>",authoring:!0},grading:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Teacher grading,&nbsp;</span><span id='courseName'></span>",authoring:!0},qbank:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>LearnWorld QuestionBank</span>",authoring:!0},certificationrequestsAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Certification Requests</span>",authoring:!0},certificationsManagement:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Certifications Management</span>",authoring:!0},coursesAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Manage Courses</span>",authoring:!0},ebookAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},emails:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Manage your emails</span>",authoring:!0},ivideoAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},workpadAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},newsAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},assessmentAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},usersAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},activityAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},statsAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},statsUsersAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},statsCourseAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},instructors:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Learnworld Instructors</span>",authoring:!0},promotions:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Manage your promotions</span>",authoring:!0},pages:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Manage your pages</span>",authoring:!1},custom_css:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Custom CSS</span>",authoring:!0},bundlesAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Manage your Bundles</span>",authoring:!0},gamification:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Gamification</span>",authoring:!0},subscriptionsAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Manage your Subscriptions</span>",authoring:!0},pagesEditor:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Pages Builder</span>",authoring:!0},settings:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Learnworld Settings</span>",authoring:!0},settings_site:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Site Settings</span>",authoring:!0},translations:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Translation Settings</span>",authoring:!0},assignments:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Assignments Settings</span>",authoring:!0},webhooks:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Webhook Settings</span>",authoring:!0},apps_configuration:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Apps Configuration</span>",authoring:!0},settings_notifications:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Notifications Settings</span>",authoring:!0},admin:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'></span>",authoring:!0},settings_financial:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Currency</span>",authoring:!0},settings_includes:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Includes Settings</span>",authoring:!0},settings_integrations:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Integration Settings</span>",authoring:!0},colorSchemeEditor:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Color Scheme Editor</span>",authoring:!0},storiesAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},settingsAuthoring:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>Build your LearnWorld,&nbsp;</span><span id='userNameTB'></span>",authoring:!0},account:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>"+LWTranslate.get("common.account")+",&nbsp;</span><span id='userName'></span>",authoring:!1},payment:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Enroll in course</span>",authoring:!1},subscribe:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Activate your subscription</span>",authoring:!1},pagesPreview:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Preview your Page</span>",authoring:!0},sales:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>LearnWorlds Sales Log</span>",authoring:!0},dashboard:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>LearnWorlds Dashboard</span>",authoring:!0},advanced:{disabled:["barSearch","barSocial"],rightbuttons:["preview"],titleBar:"<span class='-app-name'>LearnWorlds Advanced</span>",authoring:!0},release_notes:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>LearnWorlds News & Updates</span>",authoring:!0},upgrade:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>Upgrade your Subscription</span>",authoring:!0},billing:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>LearnWorlds Billing</span>",authoring:!0},activities:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>LearnWorlds Activities</span>",authoring:!0},email_logs:{disabled:["barSearch","barSocial"],rightbuttons:"none",titleBar:"<span class='-app-name'>LearnWorlds Emails Log</span>",authoring:!0}},this.authoring=this.pagesSettings[this.pagetype].authoring,this.userCoursesLegacy=[],this.buttons={contents:"<span id='eBookContents' onclick='pagesObj.showContents()' onmousedown='cancelBubbling(event)'  class='bar-button window-contents' title='"+LWTranslate.get("common.course")+" "+LWTranslate.get("common.contents")+"'><img class='bar-button-icon' src='"+imagePath+"/images/contents.png'/><span class='bar-button-label custom-clr11-text ellipsis-text'>"+LWTranslate.get("common.contents")+"</span></span>",ivideocontents:"<span class='bar-button window-contents' onclick='vplayer.showContents()' onmousedown='cancelBubbling(event)' title='"+LWTranslate.get("common.course")+" "+LWTranslate.get("common.contents")+"'><img class='bar-button-icon' src='"+imagePath+"/images/contents.png'/><span class='bar-button-label custom-clr11-text ellipsis-text'>"+LWTranslate.get("common.contents")+"</span></span><span class='bar-button window-contents' onclick='vplayer.changeScreenSize(\"fullScreen\")' onmousedown='cancelBubbling(event)' title='Full screen'><img class='bar-button-icon' src='"+imagePath+"/images/full-screen.png'/><span class='bar-button-label custom-clr11-text ellipsis-text'>Full Screen</span></span>",bookmark:"<span id='eBookBookmark' onclick='utools.toogleBookmark()' class='bar-button' title='"+LWTranslate.get("common.bookmark")+"'><img class='bar-button-icon' src='"+imagePath+"/images/e-book-bookmark.png'/><span class='bar-button-label custom-clr11-text ellipsis-text'>"+LWTranslate.get("common.bookmark")+"</span></span>",settings:"<span id='eBookSettings' onclick='utools.showReadingSettings(event);' class='bar-button' title='"+LWTranslate.get("common.settings")+"'><img class='bar-button-icon' src='"+imagePath+"/images/e-book-settings.png'/><span class='bar-button-label custom-clr11-text ellipsis-text'>"+LWTranslate.get("common.settings")+"</span></span>","all-articles":"<span id='dailyAllArticles' class='bar-button news-bar-button' title='"+LWTranslate.get("common.all_articles")+"' onclick='newspaper.reload(\"all\")'><img class='bar-button-icon' src='"+imagePath+"/images/daily-all-articles.png'/><span class='bar-button-label custom-clr11-text ellipsis-text'>"+LWTranslate.get("common.all_articles")+"</span></span>",popular:"<span id='dailyPopular' class='bar-button news-bar-button' title='"+LWTranslate.get("common.popular")+"'  onclick='newspaper.reload(\"filter=popular\")'><img class='bar-button-icon' src='"+imagePath+"/images/daily-popular.png'/><span class='bar-button-label custom-clr11-text ellipsis-text'>"+LWTranslate.get("common.popular")+"</span></span>",favorites:"<span id='dailyFavorites' class='bar-button news-bar-button' title='"+LWTranslate.get("common.favorites")+"'  onclick='newspaper.reload(\"filter=favorite\")'><img class='bar-button-icon' src='"+imagePath+"/images/daily-favorites.png'/><span class='bar-button-label custom-clr11-text ellipsis-text'>"+LWTranslate.get("common.favorites")+"</span></span>",edit:"<span id='editView' title='Edit' class='authoring-switch' onmousedown='topBar.editme()'><img src='"+imagePath+"/images/magic-button.png'/><span id='adminEditPage'>Edit page</span></span>",editPage:"<span id='editPage' title='Edit' class='authoring-switch' onmousedown='topBar.editPage()'><img src='"+imagePath+"/images/magic-button.png'/><span id='adminEditPage'>Edit page</span></span>",editCourse:"<span id='editCourseView' class='authoring-switch-lbl' title='Edit course' onmousedown='topBar.editcourse()'>Edit course</span>",preview:"<span id='previewView' title='Preview' class='authoring-switch' onmousedown='topBar.previewme()'><img src='"+imagePath+"/images/magic-button.png'/><span>Preview page</span></span>",newmessage:"<div id='gt_newmessage' class='-new-msg bar-button' onclick='messageLoad(null)' title='"+LWTranslate.get("common.new_message")+"'><img class='bar-button-icon' src='"+imagePath+"/images/new-message.png'><span id='newMsg' class='bar-button-label custom-clr11-text ellipsis-text'>"+LWTranslate.get("common.new_message")+"</span></div>",barPeopleSearch:"<div id='barPeopleSearch'><input type='text' id='searchBox' class='-top-bar-search-input learnworlds-input-small' placeholder='"+LWTranslate.get("common.search_people")+"'></input><input type='button' class='-top-bar-search-btn clr2-bg' id='searchForPeopleButton'></input><input type='button' id='clearSearch'></input></div>"},this.$els={wrapper:$("#topBarWrapper"),postsNum:$("#topBarPostsNum"),mailsNum:$("#topBarMailsNum"),notifications:$("#topBarMsgsWrapper"),userAvatar:$("#userAvatarp"),userMenu:$("#userMenu"),inContextSN:$("#barSocial"),snWrapper:$("#socialNetworkWrapper"),adsWrapper:$("#adsWrapper")},this.templates={notification:$("#topBarNotification"),adsForCourse:$("#adsForCourseTemplate")},this.support="","path-player"!==this.pagetype&&this.initContext(),this.initInterface(),this.updateVisibility=function(){document.hidden?this.hiddenTimeStart=Math.floor(Date.now()/1e3):(this.hiddenTimeStart?this.hiddenTabTime+=Math.floor(Date.now()/1e3)-this.hiddenTimeStart:this.hiddenTimeStart=Math.floor(Date.now()/1e3),this.hiddenTimeStart=!1)}.bind(this),document.addEventListener("visibilitychange",this.updateVisibility)}function navpanel(e){this.$wrapper=$("#navPanel"),this.$courses=$("#navCourses"),this.$coursesContainer=$("#navCoursesContainer"),this.$coursesTemplate=$("#coursesTemplate"),this.SOCourses=new Array,this.SOCoursesEnrolled=new Array,e?this.coursesData=e:this.load()}"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),s=1;s<arguments.length;s++){var i=arguments[s];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(a[n]=i[n])}return a},writable:!0,configurable:!0}),wwwelopers_topbar.prototype={initInterface:function(){var e=this;isLoadedInIframe("learnworlds")&&($("#topBarWrapper").hide(),void 0!==window.top.getPageType&&"function"==typeof window.top.getPageType&&window.top.getPageType(this.pagetype)),"no_mobile"==$.getURLvar("authoring")&&showMessage("alert","mobile device","Please, use a desktop or laptop computer in order to manage your school",[{name:"Ok"}]),"true"!=$.getURLvar("welcome")||void 0!==$.getURLvar("courseid")||window.disableWelcomeMessagePopup||showMessage("inform",LWTranslate.get("starting.welcome_message_title"),LWTranslate.get("starting.welcome_message"),[{name:"Ok"}]),"true"==$.getURLvar("product_owned")&&void 0===$.getURLvar("courseid")&&showMessage("inform",LWTranslate.get("starting.product_owned_title"),LWTranslate.get("starting.product_owned_message"),[{name:"Ok"}]),"undefined"!=typeof WHITELABEL&&WHITELABEL&&($(".js-learnworlds").next().css("float","none"),$(".js-learnworlds").remove()),void 0!==window.inactivitySettings&&(this.inactivityWatcher=new InactivityWatcher(window.inactivitySettings),this.inactivityWatcher.markActivityDetected(),this.inactivityWatcher.start()),this.initInactivityWatcher();var t=!1;if("object"==typeof PAGES_IN_TOPBAR&&$.each(PAGES_IN_TOPBAR,(function(e,a){t=!0,$("#pagesMenu").find("ul").append($('<li class="user-menu-choice clr2-bg-hover"><a class="white-link" href="/pages/'+e+'">'+a+"</a></li>")),$("#pagesMenuSmall").append($('<a class="hamburger-bar-button white-link" href="/pages/'+e+'"><img class="bar-button-icon" src="'+imagePath+'/images/bar-pages.png"/><span class="bar-button-label ellipsis-text">'+a+"</span></a>"))})),t?($("#barPages").show(),$("#pagesMenuSmall").show()):$("#barPages").remove(),"path-player"!==this.pagetype&&this.autoUpdateBarStatus(),$("#userAvatar").css("background-image","url('"+serverImg+"avatars/thumbs/"+me.id+".jpg?version="+encodeURIComponent(nowDateTime())+"')"),$("#appTitle").append(this.pagesSettings[this.pagetype].titleBar),this.addRightButtons(),this.$els.wrapper.disableSelection(),"C"==BILLING||this.authoring||"subscribe"==this.pagetype?($(".top-bar-subscription-wrapper").hide(),$(".app-container").removeClass("subscription-wrapper").addClass("no-subscription-wrapper")):"active"!=me.subscribed?($(".top-bar-subscription-wrapper").show(),$(".app-container").removeClass("no-subscription-wrapper").addClass("subscription-wrapper"),"expired"==me.subscribed&&($(".subscription-label").text("Renew Now!"),$(".subscription-btn").text("Continue"))):($(".top-bar-subscription-wrapper").hide(),$(".app-container").removeClass("subscription-wrapper").addClass("no-subscription-wrapper")),isLoadedInIframe("learnworlds")&&0===window.parent.location.pathname.indexOf("/author/pages_preview")&&$(".app-container").removeClass("no-subscription-wrapper"),this.$els.wrapper.find(".inboxclick").on("click",(function(){document.location.href=wwwelopersUrl("inbox")})),"inbox"!=this.pagetype&&$("#barInboxP").hover((function(t){return e.showNotifications(),t.stopPropagation(),!1}),(function(){e.hideNotifications()})),this.$els.wrapper.find(".-logo-bar").on("click",(function(){void 0!==e.navpanel&&(void 0!==window.mixpanel&&void 0!==window.mixpanel.project_trials&&window.mixpanel.project_trials.track("NavPanelOpen",{}),"undefined"==typeof authoringMode&&WI.rec("Central Menu Shown","UI"),e.navpanel.show())})),this.$els.userAvatar.hover((function(){e.$els.userMenu.fadeIn(200),$("#uaguiHelper").show()}),(function(){e.$els.userMenu.fadeOut(200),$("#uaguiHelper").hide()})),this.$els.inContextSN.on("mousedown",(function(t){if(!e.context||0!=e.context.length){if(socialNetwork){if(e.context.toString()!=socialNetwork.getContext("save").toString()){var a=e.context[e.context.length-1];"path"==a&&(a=e.context[e.context.length-2]),socialNetwork.setContext(a,e.context)}}else socialNetwork=new posts({context:{load:e.context[e.context.length-1],save:e.context}});return 1==e.$els.snWrapper.is(":visible")?$(document).mousedown():(autoclose(e.$els.snWrapper,"hide",!0),e.$els.snWrapper.fadeIn(200),"undefined"==typeof authoringMode&&WI.rec("Show Contextual Network","contextSocial")),t.stopPropagation(),!1}})),e.$els.snWrapper.find(".snWrapper2").on("scroll",(function(){$(this).scrollTop()+e.$els.snWrapper.height()>$(this).prop("scrollHeight")-640&&socialNetwork.load("old")})),"none"!=this.pagesSettings[this.pagetype].disabled){for(var a=this.pagesSettings[this.pagetype].disabled,s=0;s<a.length;s++)$("#"+a[s]).removeClass("top-bar-hover").addClass("top-bar-disabled").off("click").off("mouseover").off("mousedown").css("cursor","auto");"social"!=this.pagetype&&"profile"!=this.pagetype&&"communityAuthoring"!=this.pagetype||this.$els.snWrapper.html("")}if("dailynews"==this.pagetype){var i=$("#pageheadingTemplate").clone(!0);$("#pageheadingTemplate").remove(),i.attr("id","pageheading").appendTo($(".top-bar"))}$("#userNameTB").text(me.username),$("#"+this.pagetype+"_rmenu").show(),$(".-hamburger-menu").on("click",(function(e){$(".-hamburger-menu-list").toggle(),cancelBubbling(e),$(".-hamburger-menu-list").is(":visible")&&$(document).on("click.hamburgerMenu",(function(e){$(document).off("click.hamburgerMenu"),$(".-hamburger-menu-list").hide()}))})).children().click((function(e){return!1})),$(".-hamburger-menu .close").on("click",(function(e){return $(".-hamburger-menu-list").hide(),cancelBubbling(e),!1}))},setPagetype:function(e){this.pagetype=e},initContext:function(){"dailynews"==this.pagetype?this.context=["dialynews"]:"authoring"==this.pagetype&&(this.context=["authoring"]),this.loadBarStatus()},isInactive:function(){var e=this.secondsSinceLastActivity>this.secondsBeforeInactive;return window.eventBus&&window.eventBus.$emit&&window.eventBus.$emit("inactivity-changed",{isActive:!e}),e},initInactivityWatcher:function(){var e=this;this.inactivityWatcherInterval&&(console.warn("Inactivity watcher has already started, restarting."),this.stopInactivityWatcher());this.inactivityWatcherInterval=window.setInterval((function(){e.secondsSinceLastActivity+=1,e.secondsSinceLastActivity>e.secondsBeforeInactive&&(window.eventBus&&window.eventBus.$emit&&window.eventBus.$emit("inactivity-changed",{isActive:!1}),console.log("User has been inactive for more than "+e.secondsBeforeInactive+" seconds"))}),1e3),this.inactivityHandler()},inactivityHandler:function(e){var t=e||document;var a,s,i,n=(a=$.proxy(this.resetInactivityWatcherTimer,this),s=1e3,i=!1,function(){i||(a.apply(this,arguments),i=!0,setTimeout((function(){i=!1}),s))});["mousedown","mousemove","keydown","scroll","touchstart"].forEach((function(e){t.addEventListener(e,n,!0)})),window.addEventListener("message",(function(e){"activityDetected"===e.data.message&&n()}))},stopInactivityWatcher:function(){var e=this;this.inactivityWatcherInterval&&window.clearInterval(this.inactivityWatcherInterval);["mousedown","mousemove","keydown","scroll","touchstart"].forEach((function(t){document.removeEventListener(t,e.resetInactivityWatcherTimer,!0)})),this.resetInactivityWatcherTimer()},resetInactivityWatcherTimer:function(){window.eventBus&&window.eventBus.$emit&&window.eventBus.$emit("inactivity-changed",{isActive:!0}),this.secondsSinceLastActivity=0},initInstructorCourses:function(){for(var e=0;e<me.isInstructorIn.length;e++)this.isInstructorIn[me.isInstructorIn[e].courseTitleId]=!0},prevPage:"",prevContext:[],lastTs:!1,hiddenTabTime:0,hiddenTimeStart:!1,loadBarStatus:function(e,t,a){var s=this;this.hiddenTimeStart&&(this.hiddenTabTime+=Math.floor(Date.now()/1e3)-this.hiddenTimeStart,this.hiddenTimeStart=Math.floor(Date.now()/1e3));var i=s.loadUserCoursesForLegacy();now=Math.floor(Date.now()/1e3);var n={page:this.pagetype,previousPage:this.prevPage,pageId:null,pageUrl:window.location.pathname+window.location.search,context:this.context,previousContext:this.prevContext,durationSincePrevious:this.lastTs?now-this.lastTs:0,hidden:!!this.hiddenTimeStart,hiddenDuration:0,me:!this.notificationsLoaded,inactive:s.isInactive(),siteTemplateId:null,courseId:"course"===this.pagetype&&window.courseId?window.courseId:null,bundleId:"bundles"===this.pagetype&&product?product.id:null,subscriptionId:"subscriptions"===this.pagetype&&product?product.id:null};this.prevContext=this.context,this.prevPage=this.page,this.hiddenTabTime=0,this.lastTs=now;var r=$("meta[name=page_id]");r&&r.attr("content")&&(n.pageId=r.attr("content"));var o=["onUnload"].indexOf(a)<0;if(t||(t=null),e&&(n.actionTime=e),null!=t&&(n.additionalData=t),!o&&void 0!==navigator.sendBeacon){var c=JSON.stringify(n),l=new FormData;return l.append("data",c),l.append("_token",getUserToken()),void navigator.sendBeacon(server+"notifications",l)}$.ajax({url:server+"notifications",data:"data="+encodeURIComponent(JSON.stringify(n)),dataType:"json",type:"POST",headers:{authuser:getUserToken()},async:o,success:function(e,t,a){if(e.success?s.timesNotificationsHasFailed=0:s.timesNotificationsHasFailed++,console.warn("Notifications failed: "+s.timesNotificationsHasFailed),s.timesNotificationsHasFailed>2){var n=new URL(window.location.href);return n.searchParams.set("clientSideRedirect","1"),window.location.href=n.toString()}if(s.data=e.data,s.refresh=!0,s.updateLeftBar(),!s.notificationsLoaded&&e.me){window.pageBuilder&&window.pageBuilder.$store.dispatch("syncNotificationsData",e).then((function(){window.eventBus&&window.eventBus.$emit("legacy-variables-synced")}));var r=me.meli,o=me.subscribed;me.subscription;if(i.then((function(){e.me.courses=[],$.each(s.userCoursesLegacy,(function(t,a){e.me.courses[t]=e.courses[a.courseId],e.me.courses[t].me=a.me})),Object.assign(me,e.me),s.navpanel=new navpanel,s.initCallback&&s.initCallback()})),e.support&&(s.support=e.support,s.bindContacts()),e.coursesTags&&(s.coursesTags=e.coursesTags),me.meli=r,me.subscribed=o,"undefined"!=typeof subscriptionMode&&1==subscriptionMode&&"undefined"!=typeof me&&(0!=me.subscription||1==e.trialExpired)&&(1==me.subscription.on_trial||e.trialExpired)){var c={days_left:me.subscription.trial_days_left,on_trial:me.subscription.on_trial},l=$($("#trialExpirationNotification").render(c)).prependTo($("#topBarWrapper").find(".-basic-functions"));$(l).find(".close").click((function(e){$(l).addClass("to-hide")}))}if("undefined"!=typeof me&&1==e.hasPendingInvoices){l=$($("#pendingPaymentNotification").render()).prependTo($("#topBarWrapper").find(".-basic-functions"));$(l).find(".close").click((function(e){$(l).addClass("to-hide")}))}if(s.showAds(),void 0!==e.instructors){var p='<ul class="-hamburger-user-choices -instructor-hamburger-user-choices">',u='<ul class="user-menu instructors-submenu custom-clr1-bg">';$.each(e.instructors,(function(e,t){p+='<li class="hamburger-bar-button" onclick="topBar.inbox(\''+t.id+"', '"+t.username+'\')"><span class="bar-button-label custom-clr11-text ellipsis-text">'+t.username+"</span></li>",u+='<li class="user-menu-choice clr2-bg-hover custom-clr11-text" onclick="topBar.inbox(\''+t.id+"', '"+t.username+"')\">"+t.username+"</li>"})),p+="</ul>",u+="</ul>",$("#hamburgerSideNav").find(".js-instructors-topbar").find(".js-instructors-topbar-choices").replaceWith($(p)),$("#userMenu").find(".js-instructors-topbar").find(".js-instructors-topbar-choices").replaceWith($(u)),$(".js-instructors-topbar").show(),$(".js-instructor-topbar").hide()}s.notificationsLoaded=!0,(!isLoadedInIframe("learnworlds")||isLoadedInIframe("learnworlds")&&0!==window.parent.location.pathname.indexOf("/author/pages_preview"))&&(void 0!==window.dpModalRenderer&&window.dpModalRenderer.syncDataProtectionData(),void 0!==window.marketingOptInModalRenderer&&window.marketingOptInModalRenderer.shouldInit()&&window.marketingOptInModalRenderer.init())}},error:function(e,t,a){console.log("Failed to send loadBarStatus"),console.log(e),console.log("Error:",a)}})},loadUserCoursesForLegacy(){var e=this;return new Promise((function(t){$.ajax({url:server+"user/courses-progress",dataType:"json",type:"GET",headers:{authuser:getUserToken()},async:!0,success:function(a,s,i){a.success?(e.userCoursesLegacy=a.userCourses,t({success:!0})):t({success:!1})},error:function(){t({success:!1})}})}))},bindContacts:function(){this.support&&this.support.teacher&&$(".tp_instructor_contact").show(),this.support&&this.support.tech&&$(".tp_support_contact").show()},ask:function(e){"instructors"==e&&this.support&&this.support.teacher?document.location.href=wwwelopersUrl("inbox",{userid:this.support.teacher.id,username:this.support.teacher.username}):"support"==e&&this.support&&this.support.tech&&(document.location.href=wwwelopersUrl("inbox",{userid:this.support.tech.id,username:this.support.tech.username}))},inbox:function(e,t){document.location.href=wwwelopersUrl("inbox",{userid:e,username:t})},updateLeftBar:function(){if(void 0===this.data)return this.$els.postsNum.parent().hide(),void this.$els.mailsNum.parent().hide();0!=this.data.newposts?(this.$els.postsNum.text(this.data.newposts),this.$els.postsNum.parent().show(),$("#socialWrapperBar").prepend("<div class='-antenna'><div class='-circle2-rad circle-rad'></div><div class='-circle3-rad circle-rad'></div><div class='-circle4-rad circle-rad'></div></div>"),"undefined"==typeof authoringMode&&WI.rec("Antenna was shown","trigger")):this.$els.postsNum.parent().hide(),0!=this.data.unread?(this.$els.mailsNum.text(this.data.unread),this.$els.mailsNum.parent().show()):this.$els.mailsNum.parent().hide(),"inbox"!=this.pagetype&&window.setTimeout($.proxy(this.showNotifications,this),1e3)},showNotifications:function(){var e=this;if(this.$els.notifications.is(":hidden")||this.refresh){if(void 0!==this.data&&void 0!==this.data.notifications&&this.data.notifications.length>0&&this.refresh){$("#andmoreNotif").remove();for(var t=0;t<this.data.notifications.length;t++)this.data.notifications[t].server=server,this.data.notifications[t].timeago=timeAgo(this.data.notifications[t].modified,!0,!0),this.data.notifications[t].url=wwwelopersUrl("inbox",{message:this.data.notifications[t].id}),this.data.notifications[t].message_type="news"==this.data.notifications[t].message_type?"message":this.data.notifications[t].message_type,this.$els.notifications.prepend(this.templates.notification.render(this.data.notifications[t])),this.$els.notifications.children().eq(t).on("click",(function(){e.gotoMessage($(this))})).show();var a=this.data.unread-this.$els.notifications.children().length;a>0&&this.$els.notifications.children().eq(0).clone().attr("id","andmoreNotif").html("and "+a+" more unread message"+(1!=a?"s":"")).on("click",(function(){document.location.href=wwwelopersUrl("inbox")})).appendTo(this.$els.notifications),this.refresh=!1}this.$els.notifications.children().length>0&&(this.$els.notifications.fadeIn(200),$("#msguiHelper").show(),autoclose(this.$els.notifications,"hide",!0),autoclose($("#msguiHelper"),"hide",!0),"undefined"==typeof authoringMode&&WI.rec("Notifications shown","trigger"))}},hideNotifications:function(){this.$els.notifications.fadeOut(300),$("#msguiHelper").hide()},gotoMessage:function(e){"undefined"==typeof authoringMode&&WI.rec("Goto message through notifications","trigger"),document.location.href=e.attr("data-url")},autoUpdateBarStatus:function(){""!=this.timer&&window.clearInterval(this.timer),this.timer=window.setInterval($.proxy(this.loadBarStatus,this),this.timerInterval)},enableLeftButtons:function(){},addRightButtons:function(){var e=this;if(!$.getURLvar("preview")){this.isAuthor&&("starting"==this.pagetype||"social"==this.pagetype||"ebook"==this.pagetype||"ivideo"==this.pagetype||"dailynews"==this.pagetype||"course"==this.pagetype||"bundles"==this.pagetype||"subscriptions"==this.pagetype&&$.getURLvar("id")||"page"==this.pagetype||"workpad"==this.pagetype||"path-player"==this.pagetype)?(this.showEdit(),"path-player"==this.pagetype&&this.showEditCourse(),"starting"!=this.pagetype||this.isInstructor||this.showEditPage("starting")):this.isInstructor&&"starting"==this.pagetype||this.isAffiliate&&!this.isInstructor&&"starting"==this.pagetype?this.showEdit():this.isInstructor&&"course"===this.pagetype&&void 0!==$.getURLvar("courseid")?$.each(this.isInstructorIn,(function(t,a){t===$.getURLvar("courseid")&&a&&e.showEdit()})):this.isSegment&&this.showEdit();var t=$("#appFunctions"),a=this.pagesSettings[this.pagetype].rightbuttons;if("none"!=a)for(var s=0;s<a.length;s++)t.append(this.buttons[a[s]]);if("starting"!=this.pagetype||this.isInstructor||$("#adminEditPage").text("Manage your LearnWorld"),"starting"==this.pagetype&&this.isInstructor&&$("#adminEditPage").text("Manage your Courses"),!this.isAffiliate&&!this.isSegment||this.isInstructor||$("#editView").hide(),this.isAffiliate&&("starting"==this.pagetype||"social"==this.pagetype||"ebook"==this.pagetype||"ivideo"==this.pagetype||"dailynews"==this.pagetype||"course"==this.pagetype||"bundles"==this.pagetype||"subscriptions"==this.pagetype&&$.getURLvar("id")||"page"==this.pagetype||"workpad"==this.pagetype||"path-player"==this.pagetype)){var i=$('<a href="/author/affiliate?tab=dashboard"><span title="Affiliate" class="authoring-switch"><img src="'+imagePath+'/images/affiliate.png" /><span>Affiliate Dashboard</span></span></a>');t.append(i)}this.isSegment&&(analDashboardBtn=$('<a href="/author/userprogress"><span title="User progress" class="authoring-switch"><span>User progress</span></span></a>'),t.append(analDashboardBtn)),"dashboard"==this.pagetype&&$("#previewView").text("View your School")}},showEdit:function(){"none"==this.pagesSettings[this.pagetype].rightbuttons?this.pagesSettings[this.pagetype].rightbuttons=["edit"]:this.pagesSettings[this.pagetype].rightbuttons.push("edit")},showEditCourse:function(){this.pagesSettings[this.pagetype].rightbuttons.push("editCourse")},showEditPage:function(e){"starting"==e&&this.pagesSettings[this.pagetype].rightbuttons.push("editPage")},setContext:function(e,t,a){this.updateContext(e),t||(t=null),this.loadBarStatus(!1,t,a)},updateContext:function(e){this.context=e},showCentralMenu:function(){this.navpanel.show()},hideCentralMenu:function(){this.navpanel.hide()},editPage:function(){var e;if("starting"===this.pagetype){var t=window.location.pathname.replace("/pages/","").replace("/","");"start"==t&&(t+="&type=start"),e="pageseditor?page="+t}document.location.href=linkServer+"author/"+e},editme:function(){var e,t;switch(this.pagetype){case"ebook":e="ebookauthor?"+ebookplayer.whereAmI();break;case"ivideo":e="videoauthor?"+vplayer.whereAmI();break;case"course":e="course?courseid="+$.getURLvar("courseid");break;case"bundles":e="pageseditor?page="+$.getURLvar("bundle_id")+"&type=bundle";break;case"subscriptions":e="pageseditor?page="+$.getURLvar("id")+"&type=subscription";break;case"page":var a=document.location.pathname;if("/blog"==a)e="pageseditor?page=blog&type=blog";else if(-1!==a.indexOf("/blog/")){e="pageseditor?page="+a.substring(6)+"&type=blog_post"}else{var s=a.replace("/pages/","").replace("/","");["start","payment","thankyou","affiliate-program-terms","affiliate-registration"].indexOf(s)>-1&&(s+="&type="+s),e="pageseditor?page="+s}break;case"workpad":e="workpad";break;case"dailynews":e="news";break;case"starting":e=this.isInstructor?"courses":"dashboard";break;case"social":e="social";break;case"path-player":if(void 0!==window.pplayer)switch(pplayer.$selectedUnit.attr("data-type")){case"survey":case"quizFormal":case"certificate":case"quizWritten":case"quizInformal":t=wwwelopersUrl("assessmentAuthor",{authoringid:pplayer.$selectedUnit.attr("id").replace("Unit",""),coursetitleid:pplayer.courseid,objectype:pplayer.$selectedUnit.attr("data-type"),unit:pplayer.$selectedUnit.attr("id").replace("Unit","")});break;case"ebook":t=wwwelopersUrl("ebookauthor",{coursetitleid:pplayer.courseid,chapter:pplayer.$selectedUnit.attr("id").replace("Unit",""),courseid:pplayer.courseid,unit:pplayer.$selectedUnit.attr("id").replace("Unit","")});break;case"video":(i=this.parseQueryString(pplayer.$selectedUnit.attr("data-link"))).courseid&&i.videoid&&i.courseslug&&i.unit&&"newPlayer"==VIDEO_PLAYER?t=wwwelopersUrl("videoauthor",{coursetitleid:i.courseid,videoid:i.videoid,courseid:i.courseslug,unit:i.unit}):e="course?courseid="+pplayer.courseid+"&tab=contents";break;default:e="course?courseid="+pplayer.courseid+"&tab=contents"}else if(void 0!==window.coursePlayerVue&&getObjectLength(window.coursePlayerVue.$store.state.selectedUnitState))switch(window.coursePlayerVue.$store.state.selectedUnitState.unitData.type){case"survey":case"quizFormal":case"certificate":case"quizWritten":case"quizInformal":t=wwwelopersUrl("assessmentAuthor",{authoringid:window.coursePlayerVue.$store.state.selectedUnitState.unitData.id,coursetitleid:window.coursePlayerVue.$store.state.courseData.titleId,objectype:window.coursePlayerVue.$store.state.selectedUnitState.unitData.type,unit:window.coursePlayerVue.$store.state.selectedUnitState.unitData.id});break;case"ebook":t=wwwelopersUrl("ebookauthor",{coursetitleid:window.coursePlayerVue.$store.state.courseData.titleId,chapter:window.coursePlayerVue.$store.state.selectedUnitState.unitData.id,courseid:window.coursePlayerVue.$store.state.courseData.titleId,unit:window.coursePlayerVue.$store.state.selectedUnitState.unitData.id});break;case"ivideo":var i;(i=this.parseQueryString(window.coursePlayerVue.$store.state.selectedUnitState.unitRedirectLink)).courseid&&i.videoid&&i.courseslug&&i.unit&&"newPlayer"==VIDEO_PLAYER?t=wwwelopersUrl("videoauthor",{coursetitleid:i.courseid,videoid:i.videoid,courseid:i.courseslug,unit:i.unit}):e="course?courseid="+window.coursePlayerVue.$store.state.courseData.titleId+"&tab=contents";break;default:e="course?courseid="+window.coursePlayerVue.$store.state.courseData.titleId+"&tab=contents"}}document.location.href=t||linkServer+"author/"+e},editcourse:function(){window.pplayer?document.location.href=wwwelopersUrl("courseAuthoring",{coursetitleid:pplayer.courseid}):window.coursePlayerVue&&(document.location.href=wwwelopersUrl("courseAuthoring",{coursetitleid:window.coursePlayerVue.$store.state.courseData.titleId}))},parseQueryString:function(e){var t,a,s,i,n={};for(s=0,i=(t=(e=e.substring(e.indexOf("?")+1)).split("&")).length;s<i;s++)n[(a=t[s].split("="))[0]]=a[1];return n},previewme:function(){var e,t,a=!1;switch(this.pagetype){case"ebookAuthoring":$.getURLvar("unit")?t=wwwelopersUrl("pathPlayer",{coursetitleid:authorObj.ebook,unit:$.getURLvar("unit")}):e="ebook?"+authorObj.whereAmI();break;case"ivideoAuthoring":$.getURLvar("unit")?t=wwwelopersUrl("pathPlayer",{coursetitleid:$.getURLvar("courseTitleID"),unit:$.getURLvar("unit")}):e="ivideo?"+timeline.whereAmI();break;case"courseAuthoring":e="course?courseid="+course.courseid;break;case"coursesAuthoring":case"settingsAuthoring":e="start";break;case"workpadAuthoring":e="workpad";break;case"pagesEditor":var s=$.getURLvar("type");e=s?"author/pages_preview?page="+$.getURLvar("page")+"&type="+s:"author/pages_preview?page="+$.getURLvar("page"),a=!0;break;case"newsAuthoring":e="dailynews";break;case"communityAuthoring":e="social";break;case"grading":case"gradebook":e="course?courseid="+$.getURLvar("courseid");break;case"assessmentAuthoring":$.getURLvar("unit")?t=wwwelopersUrl("pathPlayer",{coursetitleid:$.getURLvar("course"),unit:$.getURLvar("unit")}):alert("no preview mode");break;default:e="?start=1"}t?document.location.href=t:a?window.open(linkServer+e,"_blank").focus():document.location.href=linkServer+e},showAds:function(){var e;if(this.$els.adsWrapper.length>0&&"C"==BILLING){if(this.navpanel.SOCourses.length>0)(e=this.navpanel.SOCourses[rand(this.navpanel.SOCourses.length)-1]).offerAd=!0,e.discountPerc=parseInt(100*(e.price-e.discountPrice)/e.price);else{if(!(this.navpanel.SOCoursesEnrolled.length>0))return;(e=this.navpanel.SOCoursesEnrolled[rand(this.navpanel.SOCoursesEnrolled.length)-1]).proposalAd=!0}this.$els.adsWrapper.append($("#adsForCourseTemplate").render(e)),this.$els.adsWrapper.children(":first").on("click",(function(){document.location.href=wwwelopersUrl("course",{coursetitleid:e.titleId})}))}else"people"==this.pagetype&&"S"==BILLING&&(this.$els.adsWrapper.append($("#adsForSubscription").render()),this.$els.adsWrapper.children(":first").on("click",(function(){document.location.href=wwwelopersUrl("people")})))}},navpanel.prototype={load:function(){this.coursesData=me.courses,this.init()},init:function(e){var t=this;if(e&&this.$coursesContainer.html(""),this.renderCourses(),me&&void 0!==me.isStaff&&"instructor"===me.isStaff?(this.$wrapper.find("#dashboardTile").hide(),this.$wrapper.find("#usersTile").hide(),this.$wrapper.find("#coursesTile").find(".js-panel-role-tag").show(),this.$wrapper.find(".js-panel-role-tag").text("Instructor")):me&&void 0!==me.isStaff&&!me.isStaff&&this.$wrapper.find(".js-admin-panel-buttons").hide(),this.coursesData.length<5?this.$wrapper.find(".navp-arrow-wrapper").hide():this.$wrapper.find(".navp-arrow-wrapper").on("click",(function(){"leftArrowCourses"==$(this).attr("id")?t.scroll("left"):t.scroll("right")})).show(),e)$("#navPanel .nav-course").on("click",(function(){if($(this).hasClass("notavailable"))showMessage("alert",LWTranslate.get("common.oops"),LWTranslate.get("common.not_available"),[{name:"OK"}]);else{"undefined"==typeof authoringMode&&WI.rec("Goto "+$.trim($(this).attr("data-url"))+" throught Central Panel","trigger");var e=$(this).attr("data-url"),t={};"course"==e&&(t.coursetitleid=$(this).attr("data-coursetitleid")),document.location.href=wwwelopersUrl(e,t)}}));else{var a="click";isMobile()&&(a="touchend"),$("#navPanel .nav-tile-box").on(a,(function(){if(!$(this).hasClass("js-noClick")){var e=void 0!==window.mixpanel&&void 0!==window.mixpanel.project_trials,t="NavPanelClick - "+$(this).attr("data-analytics"),a={},s="";if($(this).hasClass("js-admin-panel-button")){switch($(this).attr("id")){case"dashboardTile":s="/author/dashboard";break;case"usersTile":s="/author/users?tab=user";break;case"coursesTile":s="/author/courses"}return window.location.href=s,void(e&&t&&t.length>0&&s.length>0||(window.location.href=s))}if($(this).hasClass("notavailable"))showMessage("alert",LWTranslate.get("common.oops"),LWTranslate.get("common.not_available"),[{name:"OK"}]);else{"undefined"==typeof authoringMode&&WI.rec("Goto "+$.trim($(this).attr("data-url"))+" throught Central Panel","trigger");var i=$(this).attr("data-url"),n={};$(this).attr("data-path")&&"undefined"!=$(this).attr("data-path")?s=$(this).attr("data-path"):("course"==i&&(n.coursetitleid=$(this).attr("data-coursetitleid"),a["Product ID"]=$(this).attr("data-coursetitleid")),s=wwwelopersUrl(i,n)),e&&t&&t.length>0&&s.length>0?($.getLinkVar(s,"courseid")&&(a["Product ID"]=$.getLinkVar(s,"courseid")),window.location.href=s):window.location.href=s}}})),this.$wrapper.find(".close").on("click",(function(){t.hide()})),this.$wrapper.disableSelection()}},renderCourses:function(){for(var e,t=0;t<this.coursesData.length;t++)"soon"==this.coursesData[t].access&&(this.coursesData[t].comingsoon=!0),this.coursesData[t].premium&&"S"!=BILLING?this.coursesData[t].me.enrolled=!!this.coursesData[t].me.premium:"S"==BILLING?"active"==me.subscribed?this.coursesData[t].me.enrolled=!0:this.coursesData[t].me.enrolled=!1:this.coursesData[t].me.enrolled=!!this.coursesData[t].me.registered,"public"!=this.coursesData[t].access||this.coursesData[t].me.enrolled||(this.coursesData[t].discountFlag?this.SOCourses.push(this.coursesData[t]):this.SOCoursesEnrolled.push(this.coursesData[t])),e="undefined"!=typeof COURSE_CONTINUE_SETTING&&"course"===COURSE_CONTINUE_SETTING&&this.coursesData[t].me.enrolled?wwwelopersUrl("course",{coursetitleid:this.coursesData[t].titleId}):"undefined"!=typeof COURSE_CONTINUE_SETTING&&"path-player"===COURSE_CONTINUE_SETTING&&this.coursesData[t].me.enrolled&&this.coursesData[t].me.last_video_id||this.coursesData[t].me.last_video_id&&this.coursesData[t].me.enrolled?wwwelopersUrl("pathPlayer",{coursetitleid:this.coursesData[t].titleId,unit:this.coursesData[t].me.last_video_id}):wwwelopersUrl("course",{coursetitleid:this.coursesData[t].titleId}),this.coursesData[t].path=e,this.coursesData[t].subscription=BILLING,this.coursesData[t].index=t,this.$coursesContainer.append(this.$coursesTemplate.render(this.coursesData[t]))},show:function(){showModalDialog(this.$wrapper.attr("id"))},hide:function(){closeModalDialog(this.$wrapper.attr("id"))},scroll:function(e){var t=this,a=4*(this.$coursesContainer.children().eq(0).outerWidth()+4),s=(this.$coursesContainer.children().length-4)*a,i=this.$courses.scrollLeft();"left"==e&&(a=-a),s>=i+a&&this.$courses.animate({scrollLeft:i+a},150,(function(){t.$courses.scrollLeft(i+a)}))}},function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}((function(e){function t(){var t,a,s={height:l.innerHeight,width:l.innerWidth};return s.height||((t=c.compatMode)||!e.support.boxModel)&&(s={height:(a="CSS1Compat"===t?p:c.body).clientHeight,width:a.clientWidth}),s}function a(){return{top:l.pageYOffset||p.scrollTop||c.body.scrollTop,left:l.pageXOffset||p.scrollLeft||c.body.scrollLeft}}function s(){if(o.length){var s=0,r=e.map(o,(function(e){var t=e.data.selector,a=e.$element;return t?a.find(t):a}));for(i=i||t(),n=n||a();s<o.length;s++)if(e.contains(p,r[s][0])){var c=e(r[s]),l={height:c[0].offsetHeight,width:c[0].offsetWidth},u=c.offset(),d=c.data("inview");if(!n||!i)return;u.top+l.height>n.top&&u.top<n.top+i.height&&u.left+l.width>n.left&&u.left<n.left+i.width?d||c.data("inview",!0).trigger("inview",[!0]):d&&c.data("inview",!1).trigger("inview",[!1])}}}var i,n,r,o=[],c=document,l=window,p=c.documentElement;e.event.special.inview={add:function(t){o.push({data:t,$element:e(this),element:this}),!r&&o.length&&(r=setInterval(s,250))},remove:function(e){for(var t=0;t<o.length;t++){var a=o[t];if(a.element===this&&a.data.guid===e.guid){o.splice(t,1);break}}o.length||(clearInterval(r),r=null)}},e(l).on("scroll resize scrollstop",(function(){i=n=null})),!p.addEventListener&&p.attachEvent&&p.attachEvent("onfocusin",(function(){n=null}))}));