"use strict";(self.webpackChunkcodeneuron_templates=self.webpackChunkcodeneuron_templates||[]).push([[68204],{33782:(e,n,t)=>{t.d(n,{P7:()=>i,Zl:()=>o,u0:()=>a});var r=t(4950),a={name:"",description:"",icon:"",access:r.Ze.PUBLIC,is_members_allowed_to_post:!0,is_members_allowed_to_poll:!0,is_members_allowed_to_comment:!0,is_members_allowed_to_upvote:!0,is_members_allowed_to_like:!0,is_members_allowed_to_share:!0,is_members_allowed_to_upload_images:!0,is_members_allowed_to_upload_videos:!0,is_members_allowed_to_upload_files:!0,is_members_allowed_to_view_members:!0,is_members_allowed_to_mention_members:!0,is_members_allowed_to_sort_posts:!0,is_standalone:!1,default_post_sorting:r.Xb.CREATED_DESC,hidden_from_community:!1,moderators:[],is_invitation_required:!1},o={name:"",description:"",display_order:0,channel_ids:[]},i={GENERAL:"general",CHANNEL_ACCESS:"channelAccess",CHANNEL_MEMBERS:"channelMembers"}},87045:(e,n,t)=>{t.d(n,{z:()=>b});t(47941),t(38880),t(57658),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(93433),a=t(4942),o=t(15861),i=(t(68309),t(21249),t(57327),t(41539),t(26699),t(32023),t(5212),t(82526),t(41817),t(92222),t(69826),t(64687)),s=t.n(i),u=t(63420),l=t(70538),c=t(33782),d=t(56249),p=t(68485),f=t(68805),v=t(69623),h=t(29491);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error";window.showMessage(p.zG.ERROR,n,e)},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Success";window.showMessage(p.zG.SUCCESS,n,e)},b=(0,u.Q_)("useAggregatedCollectionsStore",(function(){var e=(0,v.Q)(),n=(0,f.s)([]),t=(0,l.computed)((function(){return n.list.value})),a=function(){var e=(0,o.Z)(s().mark((function e(){var n,t,r,a,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.fetchAuthoringAggregatedCollections();case 3:if(t=e.sent,r=t.data,a=r.data,o=r.errors,i=r.success,(null==o||!o.length)&&i){e.next=8;break}return w("An error occurred while fetching collections."),e.abrupt("return");case 8:return e.abrupt("return",null!==(n=a.collections)&&void 0!==n?n:[]);case 11:e.prev=11,e.t0=e.catch(0),w("An error occurred while fetching collections.");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,o.Z)(s().mark((function e(n){var t,r,a,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.createCollection(n);case 2:if(t=e.sent,r=t.data,a=r.data,o=r.errors,i=r.success,(null==o||!o.length)&&i){e.next=7;break}return w("An error occurred while creating collection."),e.abrupt("return");case 7:return g('Collection "'.concat(n.name,'" created.')),e.abrupt("return",a.collection);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,o.Z)(s().mark((function e(n,t){var r,a,o,i,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.updateCollection(n,t);case 2:if(r=e.sent,a=r.data,o=a.data,i=a.errors,u=a.success,(null==i||!i.length)&&u){e.next=7;break}return w('An error occurred while saving "'.concat(t.name,'".')),e.abrupt("return");case 7:return g('Collection "'.concat(t.name,'" saved.')),e.abrupt("return",o.collection);case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),m=function(){var e=(0,o.Z)(s().mark((function e(n){var t,r,a,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.deleteCollection(n);case 2:if(t=e.sent,r=t.data,a=r.data,o=r.errors,i=r.success,(null==o||!o.length)&&i){e.next=7;break}return w("Collection was not deleted due to an error."),e.abrupt("return");case 7:return e.abrupt("return",a.collection_id);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,o.Z)(s().mark((function e(n){var t,r,a,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Z.saveCollectionsManagement(n);case 2:if(t=e.sent,r=t.data,a=r.data,o=r.errors,i=r.success,(null==o||!o.length)&&i){e.next=7;break}return w("Saving failed."),e.abrupt("return");case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=(0,o.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.map((function(e,n){return{id:e.id,display_order:n,channel_ids:e.channel_ids}})),e.next=3,b(t);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=function(){var r=(0,o.Z)(s().mark((function r(a){var o,u,l,c,d;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i(a);case 2:if(o=r.sent){r.next=5;break}return r.abrupt("return");case 5:return o.channels||(o.channels=[]),u=o.display_order,l=o.id,c=o.name,d=o.description,n.addItemAtIndex({id:l,name:c,description:d},u),e.previewCollectionsWithChannels.addItemAtIndex(o,u),r.next=12,C(t.value);case 12:return r.abrupt("return",o);case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),O=function(){var t=(0,o.Z)(s().mark((function t(r){var a,o,i,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(r.id,r);case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return");case 5:return o=a.id,i=a.name,l=a.description,n.updateItem({id:o,name:i,description:l}),e.previewCollectionsWithChannels.updateItem(a),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),S=function(){var r=(0,o.Z)(s().mark((function r(a){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!a.channel_ids||0===a.channel_ids.length){r.next=2;break}return r.abrupt("return",window.showMessage(p.zG.ALERT,'Unable to remove <span class="weglot-exclude">"'.concat(a.name,'"</span>'),"You need to remove all channels from the collection first.",[{name:"Ok",class:"solid"}]));case 2:return r.next=4,m(a.id,a);case 4:if(r.sent){r.next=7;break}return r.abrupt("return");case 7:return n.removeItemById(a.id),e.previewCollectionsWithChannels.removeItemById(a.id),r.next=11,C(t.value);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),I=function(){var r=(0,o.Z)(s().mark((function r(a){var o,i,u;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!((o=n.findItemIndexById(a.id))<=0)){r.next=3;break}return r.abrupt("return",console.error("The collection cannot be moved up further."));case 3:return i=n.list.value[o].id,u=n.list.value[o-1].id,n.swapItems(o,o-1),e.previewCollectionsWithChannels.updateItem({id:i,display_order:o-1}),e.previewCollectionsWithChannels.updateItem({id:u,display_order:o}),r.next=10,C(t.value);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),P=function(){var r=(0,o.Z)(s().mark((function r(a){var o,i,u;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(-1===(o=n.findItemIndexById(a.id))||o>=n.length.value-1)){r.next=3;break}return r.abrupt("return",console.error("The collection cannot be moved down further."));case 3:return i=n.list.value[o].id,u=n.list.value[o+1].id,n.swapItems(o,o+1),e.previewCollectionsWithChannels.updateItem({id:i,display_order:o+1}),e.previewCollectionsWithChannels.updateItem({id:u,display_order:o}),r.next=10,C(t.value);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),E=function(e,r){var a=t.value.map((function(n){var t,a;return n.id===r?_(_({},n),{},{channel_ids:null===(t=n.channel_ids)||void 0===t?void 0:t.filter((function(n){return n!==e})),channels:null===(a=n.channels)||void 0===a?void 0:a.filter((function(n){return n.id!==e}))}):n}));n.setList(a)},x=function(){var r=(0,o.Z)(s().mark((function r(a,o,i,u){var l,c,d,p,v,h;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d=n.findItemById(a),(p=(0,f.s)(null!==(l=null==d?void 0:d.channel_ids)&&void 0!==l?l:[])).moveItemToIndex(u,i),(v=(0,f.s)(null!==(c=null==d?void 0:d.channels)&&void 0!==c?c:[])).moveItemToIndex(u,i),h=_(_({},d),{},{channel_ids:p.getValue(),channels:v.getValue()}),n.updateItem(h),e.previewCollectionsWithChannels.updateItem({id:h.id,channel_ids:h.channel_ids}),r.next=10,C(t.value);case 10:case"end":return r.stop()}}),r)})));return function(e,n,t,a){return r.apply(this,arguments)}}(),Z=function(){var r=(0,o.Z)(s().mark((function r(a,o,i){var u,l,c,d,p,v,h;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=t.value.find((function(e){return null==e?void 0:e.channel_ids.includes(o.id)})),d=n.findItemById(a),(p=(0,f.s)(null!==(u=null==d?void 0:d.channel_ids)&&void 0!==u?u:[])).addItemAtIndex(o.id,i),(v=(0,f.s)(null!==(l=null==d?void 0:d.channels)&&void 0!==l?l:[])).addItemAtIndex(o,i),h=_(_({},d),{},{channel_ids:p.getValue(),channels:v.getValue()}),n.updateItem(h),e.previewCollectionsWithChannels.updateItem({id:h.id,channel_ids:h.channel_ids,channels:h.channels}),E(o.id,c.id),e.handleRemoveChannelFromPreviewCollection(o.id,c.id),r.next=13,C(t.value);case 13:case"end":return r.stop()}}),r)})));return function(e,n,t){return r.apply(this,arguments)}}(),k=function(){var e=(0,o.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:t=e.sent,n.setList(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleChannelAdded:Z,handleChannelMoved:x,getAggregatedCollections:t,handleSearchCollections:function(e){var t,r;return null!==(t=null===(r=n.list.value)||void 0===r?void 0:r.filter((function(n){var t,r,a=e.text.toLowerCase(),o=n.name.toLowerCase().includes(a),i=null!==(t=null===(r=n.channels)||void 0===r?void 0:r.some((function(e){return e.name.toLowerCase().includes(a)})))&&void 0!==t&&t;return!(e.text&&!o&&!i)&&(!e.collectionId||n.id===e.collectionId)})))&&void 0!==t?t:[]},handleAddNewCollection:y,handleUpdateCollection:O,handleDeleteCollection:S,handleMoveCollectionUp:I,handleMoveCollectionDown:P,handleSaveCollectionsOrder:C,buildNewCollectionProperties:function(){return _(_({},c.Zl),{},{display_order:n.length.value})},buildNewCollectionBelowProperties:function(e){var t=n.findItemIndexById(e.id);return _(_({},c.Zl),{},{display_order:t+1})},handleAddChannelToAggregatedCollection:function(e,a){var o,i={access:a.access,description:a.description,icon:a.icon,id:a.id,members_count:(0,h.W)(a.members).valid,members:null!==(o=a.members)&&void 0!==o?o:0,name:a.name,posts_count:0},s=t.value.map((function(n){var t,a;return e===n.id?_(_({},n),{},{channel_ids:[].concat((0,r.Z)(null!==(t=n.channel_ids)&&void 0!==t?t:[]),[i.id]),channels:[].concat((0,r.Z)(null!==(a=n.channels)&&void 0!==a?a:[]),[i])}):n}));n.setList(s)},handleUpdateChannelInAggregatedCollection:function(e){var r,a={access:e.access,id:e.id,members_count:(0,h.W)(e.members).valid,members:null!==(r=e.members)&&void 0!==r?r:0,name:e.name},o=t.value.map((function(e){if(e.channel_ids.includes(a.id)){var n=e.channels.map((function(e){return e.id===a.id?_(_({},e),a):e}));return _(_({},e),{},{channels:n})}return e}));n.setList(o)},handleRemoveChannelFromAggregatedCollection:E,loadAuthoringAggregatedCollectionsState:k}}))},27108:(e,n,t)=>{t.d(n,{q:()=>g});t(47941),t(82526),t(38880),t(57658),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(4942),a=t(15861),o=t(64687),i=t.n(o),s=(t(69826),t(41539),t(68309),t(57327),t(63420)),u=t(70538),l=t(56249),c=t(29225),d=t(68485),p=t(33782),f=t(69623),v=t(87045),h=t(93949),m=t(96486);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g=(0,s.Q_)("socialAuthoring",(function(){var e=(0,f.Q)(),n=(0,v.z)(),t=(0,u.ref)("Community"),r=(0,u.ref)(""),o=(0,u.ref)({}),s=(0,u.ref)({flag:!1,tab:p.P7.GENERAL}),_=(0,u.ref)(!1),g=(0,u.ref)({}),b=(0,u.ref)([]),C=(0,u.ref)([]),y=(0,u.ref)({display:!1,exportType:null}),O=(0,u.computed)((function(){var n;if(!r.value)return null;var t=null===(n=C.value)||void 0===n?void 0:n.find((function(e){return r.value===e.id}));return t||e.flatMapOfChannels.find((function(e){return r.value===e.id}))})),S=function(e){r.value=e},I=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.P7.GENERAL,r=arguments.length>2?arguments[2]:void 0;S(null!==(e=null==n?void 0:n.id)&&void 0!==e?e:""),s.value={flag:!0,tab:t,membersFilter:r}},P=(0,u.computed)((function(){return""===r.value})),E=(0,u.computed)((function(){return!o.value.id})),x={site_social:!1,site_social_groups:[],site_disable_perunit_social:!1,site_disable_inbox:!1,site_disable_courses_social:!1,site_social_discussions_global_settings:{is_members_allowed_to_post:!1,is_members_allowed_to_poll:!1,is_members_allowed_to_comment:!1,is_members_allowed_to_upvote:!1,is_members_allowed_to_like:!1,is_members_allowed_to_share:!1,is_members_allowed_to_upload_images:!1,is_members_allowed_to_upload_videos:!1,is_members_allowed_to_upload_files:!1,is_members_allowed_to_mention_members:!0}},Z=function(e){g.value=e},k=function(e){b.value=e},A=function(){var e=(0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.FK)((0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.DS)(l.Z.saveSettings(g.value));case 2:case"end":return e.stop()}}),e)}))),null,!0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function M(){return(M=(0,a.Z)(i().mark((function e(){var n,t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.getSettings();case 2:r=e.sent,Z((0,m.merge)({},x,null!==(n=null===(t=r.data)||void 0===t?void 0:t.settings)&&void 0!==n?n:{}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=(0,a.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.getPagesOptionsListForCommunitySettings();case 2:n=e.sent,k(n.data.pages);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return j=(0,a.Z)(i().mark((function t(r){var a,o,s,u=arguments;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},t.next=3,(0,c.B)(l.Z.createCommunityChannel(w(w({},r),{},{userSelection:a})));case 3:(o=t.sent).isBad&&window.showMessage(d.zG.ERROR,"Error","Space was not created due to an error."),o.isOK&&(s=o.data.group,e.handleAddChannelToPreviewCollection(r.collection_id,s),n.handleAddChannelToAggregatedCollection(r.collection_id,s),window.WI.track("Create space",{access:o.data.group.access,sort:o.data.group.is_members_allowed_to_sort_posts?"on":"off","show space members":o.data.group.is_members_allowed_to_view_members?"on":"off","hide space":o.data.group.hidden_from_community?"on":"off",origin:"Community"}),window.showMessage(d.zG.SUCCESS,"Space created successfully",'Space <span class="weglot-exclude">"'.concat(r.name,'"</span> created.')));case 6:case"end":return t.stop()}}),t)}))),j.apply(this,arguments)}function D(){return D=(0,a.Z)(i().mark((function t(r,a){var o,s,u,p=arguments;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=p.length>2&&void 0!==p[2]?p[2]:{},t.next=3,(0,c.B)(l.Z.updateCommunityChannel(r,w(w({},a),{},{userSelection:o})));case 3:(s=t.sent).isBad&&window.showMessage(d.zG.ERROR,"Error","Space was not saved due to an error."),s.isOK&&(u=s.data.group,e.handleUpdateChannelInPreviewCollection(u),n.handleUpdateChannelInAggregatedCollection(u),window.showMessage(d.zG.SUCCESS,"Space saved successfully",'Space <span class="weglot-exclude">"'.concat(s.data.group.name,'"</span> updated.')));case 6:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}function U(){return(U=(0,a.Z)(i().mark((function t(r,a){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.B)(l.Z.deleteCommunityChannel(r.id,{collection_id:a}));case 2:t.sent.isOK?(e.handleRemoveChannelFromPreviewCollection(r.id,a),n.handleRemoveChannelFromAggregatedCollection(r.id,a),window.showMessage(d.zG.SUCCESS,"Space removed successfully",'Space "'.concat(r.name,'" was removed.'))):window.showMessage(d.zG.ERROR,"Error",'Space <span class="weglot-exclude">"'.concat(r.name,'"</span> was not removed due to an error.'));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(){return(L=(0,a.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.B)(l.Z.deleteCommunityChannel(n.id));case 2:e.sent.isOK?(C.value=C.value.filter((function(e){return e.id!==n.id})),window.showMessage(d.zG.SUCCESS,"Space removed successfully",'Space <span class="weglot-exclude">"'.concat(n.name,'"</span> was removed.'))):window.showMessage(d.zG.ERROR,"Error",'Space <span class="weglot-exclude">"'.concat(n.name,'"</span> was not removed due to an error.'));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e){o.value=e},T=function(){var e=(0,a.Z)(i().mark((function e(){var n,t,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.getCommunityChannels({courseActivitiesOnly:!0});case 3:if(n=e.sent,t=n.data,r=t.groups,a=t.errors,o=t.success,(null==a||!a.length)&&o){e.next=8;break}return window.showMessage(d.zG.ERROR,"Error","An error occurred while fetching standalone channels."),e.abrupt("return");case 8:C.value=r,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),window.showMessage(d.zG.ERROR,"Error","An error occurred while fetching standalone channels.");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return{selectedCollection:o,activeTab:t,isInChannelCreateMode:P,channelSideFormStatus:s,pages:b,selectedSpaceId:r,settings:g,courseActivityChannels:C,exportModalDisplay:y,closeChannelSideForm:function(){N({}),S(""),s.value={flag:!1,tab:p.P7.GENERAL}},loadCommunitySettings:function(){return M.apply(this,arguments)},loadPagesOptionsListForCommunitySettings:function(){return R.apply(this,arguments)},openChannelSideForm:I,saveSettings:A,setActiveTab:function(e){t.value=e},setSelectedSpaceId:S,setSettings:Z,isCollectionSideFormOpened:_,setSelectedCollection:N,openCollectionSideForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(e),_.value=!0},closeCollectionSideForm:function(){_.value=!1,N({})},createChannel:function(e){return j.apply(this,arguments)},removeChannel:function(e,n){return U.apply(this,arguments)},removeCourseActivityChannel:function(e){return L.apply(this,arguments)},updateChannel:function(e,n){return D.apply(this,arguments)},setChannel:function(t){e.handleUpdateChannelInPreviewCollection(t),n.handleUpdateChannelInAggregatedCollection(t)},setExportModalDisplay:function(e){y.value=e},isInCollectionCreateMode:E,addChannelToCollection:function(e){N(e),I()},selectedSpace:O,loadCourseActivityChannels:T}}))},68805:(e,n,t)=>{t.d(n,{s:()=>l});t(47941),t(82526),t(38880),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(4942),a=t(29439),o=t(93433),i=(t(57658),t(40561),t(57327),t(41539),t(34553),t(69826),t(70538));function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,i.ref)(e),t=function(){return n.value},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n.value=e},s=function(e){n.value.push(e)},l=function(e,t){n.value.splice(t,0,e)},c=function(e,t){if(!(e<0||t<0||e>=n.value.length||t>=n.value.length)){var r=[n.value[t],n.value[e]];n.value[e]=r[0],n.value[t]=r[1],n.value=(0,o.Z)(n.value)}},d=function(e,t){if(!(e<0||t<0||e>=n.value.length||t>=n.value.length)){var r=n.value.splice(e,1),o=(0,a.Z)(r,1)[0];n.value.splice(t,0,o)}},p=function(e){n.value=n.value.filter((function(n){return n.id!==e}))},f=function(e){var t=n.value.findIndex((function(n){return n.id===e.id}));-1!==t&&(n.value[t]=u(u({},n.value[t]),e),n.value=(0,o.Z)(n.value))},v=function(e){return n.value.find((function(n){return n.id===e}))},h=function(e){return n.value.findIndex((function(n){return n.id===e}))},m=(0,i.computed)((function(){return n.value.length}));return{list:n,length:m,setList:r,addItem:s,addItemAtIndex:l,swapItems:c,moveItemToIndex:d,updateItem:f,removeItemById:p,findItemById:v,findItemIndexById:h,getValue:t}}},29491:(e,n,t)=>{t.d(n,{W:()=>r});t(57327),t(41539);var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e||0===e.length)return{valid:0,joined:0,invited:0};var n=e.filter((function(e){return"549d7ee2e4b4c8b511000000"!==e.id})),t=n.length,r=n.filter((function(e){return"normal"===e.status})).length,a=n.filter((function(e){return"invited"===e.status})).length;return{valid:t,joined:r,invited:a}}},4950:(e,n,t)=>{t.d(n,{AI:()=>C,I_:()=>u,Lf:()=>S,Rz:()=>O,UA:()=>d,VZ:()=>b,Xb:()=>m,Xe:()=>p,Ze:()=>s,a:()=>y,aR:()=>v,ar:()=>_,d:()=>c,fd:()=>w,i_:()=>l,jM:()=>o,p7:()=>i,qC:()=>h,sy:()=>f,tG:()=>g});var r,a=t(4942),o={attachments:[],best_of:null,comments:[],context:null,likes:null,social_object:{type:null,data:null},social_items:[],text:"",text_mentions:[]},i={best_of:null,likes:null,text:"",text_mentions:[],attachments:[],social_items:[]},s={PRIVATE:"private",PUBLIC:"public"},u={GENERAL:"general",MENTIONS:"mentions",REPLIES:"replies",COURSE_DISCUSSIONS:"course_discussions"},l={COURSE_DISCUSSION:"course",USER_GROUP:"group"},c={IMAGE:"image",POLL:"poll",LIVE_CODE:"livecode",LINK:"link",TIP:"tip"},d={IMAGE:"image",VIDEO:"video",FILE:"file",AUDIO:"audio"},p={IMAGE:"image",FILE:"file"},f={AWAITING_SCAN:"awaiting_scan",SCAN_FAILED:"scan_failed",UNSAFE:"unsafe",SAFE:"safe"},v={FEED:"feed",MEMBERS:"members"},h={PUBLIC:"social",PRIVATE:"socialAttachments"},m={CREATED_DESC:"created_desc",CREATED_ASC:"created_asc",MODIFIED_DESC:"modified_desc"},_=5,w=1,g={PRIVATE:"default_channel_private_lock",PUBLIC:"default_channel_public_hashtag"},b=(r={},(0,a.Z)(r,g.PUBLIC,"fa-hashtag"),(0,a.Z)(r,g.PRIVATE,"fa-lock"),r),C={POST:"post",COMMENT:"comment"},y={POST:1e4,COMMENT:5e3},O=20,S="everyone"},95135:(e,n,t)=>{t.d(n,{X:()=>s});var r=t(4942),a=(t(43371),t(63420)),o=t(70538),i=Object.freeze({COMMENT:"canMemberComment",LIKE:"canMemberLike",POST:"canMemberPost",POLL:"canMemberPoll",SHARE:"canMemberShare",UPLOAD_FILES:"canMemberUploadFiles",UPLOAD_IMAGES:"canMemberUploadImages",UPLOAD_VIDEOS:"canMemberUploadVideos",UPVOTE:"canMemberUpvote",VIEW_MEMBERS:"canMemberViewMembers",SORT_POSTS:"canMemberSortPosts",MENTION_MEMBERS:"canMemberMention"}),s=(0,a.Q_)("feedPermissionsStore",(function(){var e,n=(e={},(0,r.Z)(e,i.COMMENT,!0),(0,r.Z)(e,i.LIKE,!0),(0,r.Z)(e,i.POST,!0),(0,r.Z)(e,i.POLL,!0),(0,r.Z)(e,i.SHARE,!0),(0,r.Z)(e,i.UPLOAD_FILES,!0),(0,r.Z)(e,i.UPLOAD_IMAGES,!0),(0,r.Z)(e,i.UPLOAD_VIDEOS,!0),(0,r.Z)(e,i.UPVOTE,!0),(0,r.Z)(e,i.VIEW_MEMBERS,!0),(0,r.Z)(e,i.SORT_POSTS,!0),(0,r.Z)(e,i.MENTION_MEMBERS,!0),e),t=(0,o.ref)(n),a=function(e){t.value=e};(0,o.computed)((function(){return"admin"===window.me.userRole}));return{permissions:t,setPermissions:a,buildPermissions:function(e){var t,s,u=e.source;if(u){if(o.default.prototype.$lwGates.canUserManagePostsInChannel(u))return a(n);a((s={},(0,r.Z)(s,i.COMMENT,u.is_members_allowed_to_comment),(0,r.Z)(s,i.LIKE,u.is_members_allowed_to_like),(0,r.Z)(s,i.POST,u.is_members_allowed_to_post),(0,r.Z)(s,i.POLL,u.is_members_allowed_to_poll),(0,r.Z)(s,i.SHARE,u.is_members_allowed_to_share),(0,r.Z)(s,i.UPLOAD_FILES,u.is_members_allowed_to_upload_files),(0,r.Z)(s,i.UPLOAD_IMAGES,u.is_members_allowed_to_upload_images),(0,r.Z)(s,i.UPLOAD_VIDEOS,u.is_members_allowed_to_upload_videos),(0,r.Z)(s,i.UPVOTE,u.is_members_allowed_to_upvote),(0,r.Z)(s,i.VIEW_MEMBERS,u.is_members_allowed_to_view_members),(0,r.Z)(s,i.SORT_POSTS,u.is_members_allowed_to_sort_posts),(0,r.Z)(s,i.MENTION_MEMBERS,null===(t=u.is_members_allowed_to_mention_members)||void 0===t||t),s))}}}}))},69623:(e,n,t)=>{t.d(n,{Q:()=>w});t(47941),t(82526),t(38880),t(57658),t(89554),t(54747),t(49337),t(33321),t(69070);var r=t(93433),a=t(15861),o=t(4942),i=(t(86535),t(99244),t(41539),t(69826),t(92222),t(21249),t(26699),t(32023),t(57327),t(64687)),s=t.n(i),u=t(56249),l=t(70538),c=t(63420),d=t(68805),p=t(93949),f=t(29225),v=t(67141),h=t(4950);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=(0,c.Q_)("usePreviewCollectionsStore",(function(){var e,n=(0,v.$)(),t=(0,d.s)([]),i=(0,l.ref)((e={},(0,o.Z)(e,h.I_.COURSE_DISCUSSIONS,0),(0,o.Z)(e,h.I_.MENTIONS,0),(0,o.Z)(e,h.I_.REPLIES,0),e)),c=(0,l.computed)((function(){var e;return null!==(e=t.list)&&void 0!==e?e:[]})),m=function(){var e=(0,a.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n.isAuthoring){e.next=7;break}return e.next=4,(0,p.Eh)(u.Z.fetchAuthoringCollectionsWithChannels());case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,(0,p.Eh)(u.Z.fetchCollectionsWithChannels());case 9:e.t0=e.sent;case 10:return t=e.t0,e.abrupt("return",t.data.data.collections);case 14:return e.prev=14,e.t1=e.catch(0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,a.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:t.setList(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=(0,l.computed)((function(){return t.list.flatMap((function(e){return e.channels}))}));function b(){return(b=(0,a.Z)(s().mark((function e(){var t,r,a,o,l,c,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.Eh)(u.Z.getNewPostsCounters({context:"community"}));case 2:o=e.sent,l=o.data.groups,c=o.data.courses,i.value[h.I_.COURSE_DISCUSSIONS]=null!==(t=o.data.courseDiscussions)&&void 0!==t?t:0,i.value[h.I_.MENTIONS]=null!==(r=o.data.mentions)&&void 0!==r?r:0,i.value[h.I_.REPLIES]=null!==(a=o.data.replies)&&void 0!==a?a:0,l&&g.value.map((function(e){return l[e.id]&&(e.new_posts=l[e.id].new_posts),e})),c&&(d=(0,p.ut)(n.courses).map((function(e){return c[e.titleId]&&(e.new_posts=c[e.titleId].new_posts),e})),n.setCourses(d));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=(0,a.Z)(s().mark((function e(n){var r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.Eh)(u.Z.getCommunityChannel(n),!1);case 3:r=e.sent,a=r.data.group,o=[{channels:[a]}],t.setList(o),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var y=function(e,n){var r=c.value.map((function(t){var r,a;return t.id===n?_(_({},t),{},{channel_ids:null===(r=t.channel_ids)||void 0===r?void 0:r.filter((function(n){return n!==e})),channels:null===(a=t.channels)||void 0===a?void 0:a.filter((function(n){return n.id!==e}))}):t}));t.setList(r)},O=function(){var e=(0,a.Z)(s().mark((function e(n,t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f.B,e.next=3,u.Z.leaveChannel(t);case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:e.sent.isOK&&y(t,r);case 8:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}();return{flatMapOfChannels:g,getPreviewCollectionsWithChannels:c,previewCollectionsWithChannels:t,aggregatedFeedNewPostCount:i,handleLeaveChannel:O,handleAddChannelToPreviewCollection:function(e,n){var a,o,i=c.value.find((function(n){return e===n.id}));i?t.updateItem(_(_({},i),{},{channel_ids:[].concat((0,r.Z)(null!==(a=i.channel_ids)&&void 0!==a?a:[]),[n.id]),channels:[].concat((0,r.Z)(null!==(o=i.channels)&&void 0!==o?o:[]),[n])})):w()},handleUpdateChannelInPreviewCollection:function(e){var n=c.value.map((function(n){if(n.channel_ids.includes(e.id)){var t=n.channels.map((function(n){return n.id===e.id?e:n}));return _(_({},n),{},{channels:t})}return n}));t.setList(n)},handleRemoveChannelFromPreviewCollection:y,loadPreviewCollectionsWithChannelsState:w,loadChannelForStandaloneFeed:function(e){return C.apply(this,arguments)},loadNewPostsCounters:function(){return b.apply(this,arguments)},resetAggregatedFeedNewPostCount:function(e){e&&(i.value[e]=0)}}}))},67141:(e,n,t)=>{t.d(n,{$:()=>C});t(82526),t(57327),t(38880),t(49337),t(33321),t(69070);var r=t(29439),a=t(15861),o=t(4942),i=t(64687),s=t.n(i),u=(t(69826),t(41539),t(89554),t(54747),t(47941),t(79753),t(34553),t(40561),t(26699),t(32023),t(2707),t(57658),t(66992),t(88674),t(78783),t(33948),t(63420)),l=t(70538),c=t(93949),d=t(56249),p=t(29225),f=t(4950),v=t(41162),h=t(69623),m=t(95135),_=t(27108);function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var b=f.Xb.MODIFIED_DESC,C=(0,u.Q_)("socialContent",(function(){var e=(0,h.Q)(),n=(0,m.X)(),t=(0,_.q)(),i=(0,l.ref)({}),u=(0,l.ref)([]),w=(0,l.ref)(null),C=(0,l.ref)([]),y=(0,l.ref)(null),O=(0,l.ref)([]),S=(0,l.ref)(f.aR.FEED),I=(0,l.ref)(b),P=(0,l.ref)(null),E=(0,l.ref)(null),x=(0,l.ref)(null),Z=(0,l.ref)(null),k=(0,l.ref)(!1),A=(0,l.ref)(!1),M=(0,l.ref)(!1),R=(0,l.ref)(null),j=(0,l.ref)(null),D=(0,l.ref)({}),U=(0,l.computed)((function(){var n;if(!w.value)return null;if(u.value.find((function(e){var n=e.titleId;return w.value===n})))return f.i_.COURSE_DISCUSSION;var r=e.flatMapOfChannels.find((function(e){var n=e.id;return w.value===n})),a=null==t||null===(n=t.courseActivityChannels)||void 0===n?void 0:n.find((function(e){return w.value===e.id}));return r||a?f.i_.USER_GROUP:null})),L=(0,l.computed)((function(){var n;if(!w.value)return null;if(U.value===f.i_.COURSE_DISCUSSION)return u.value.find((function(e){return w.value===e.titleId}));var r=null==t||null===(n=t.courseActivityChannels)||void 0===n?void 0:n.find((function(e){return w.value===e.id}));return r||e.flatMapOfChannels.find((function(e){return w.value===e.id}))})),N=(0,l.computed)((function(){var e,n=null!==(e=R.value)&&void 0!==e?e:function(){var e={};return y.value===f.I_.MENTIONS&&(e.my="text_mentions"),y.value===f.I_.REPLIES&&(e.my="replies"),y.value===f.I_.COURSE_DISCUSSIONS&&(e.my="course_discussions"),E.value&&(e.context=E.value),x.value&&(e.parent_context=x.value),U.value===f.i_.USER_GROUP&&(e.group_id=w.value),e}();return P.value&&(n.query=P.value),n})),T=(0,l.computed)((function(){var e,n,r,a;return"alert"===(null===(e=t.settings)||void 0===e||null===(n=e.site_social)||void 0===n?void 0:n.action)||"redirect"===(null===(r=t.settings)||void 0===r||null===(a=r.site_social)||void 0===a?void 0:a.action)})),B=(0,l.computed)((function(){var e,n;return null!==(e=null==L||null===(n=L.value)||void 0===n?void 0:n.is_standalone)&&void 0!==e&&e})),F=(0,l.computed)((function(){return B.value?j.value:null}));function G(e){i.value=null!=e?e:{}}function V(e,n){i.value[e]&&Object.keys(n).forEach((function(t){return(0,c.D5)(i.value[e],t,n[t])}))}function W(e){P.value=e||null}function z(e,n){E.value=e,x.value=n}function K(e){Z.value=Array.isArray(e)&&e.length>0?e:null}function Q(e){var n=(0,c.ut)(i.value);n[e.id]&&delete n[e.id],G(g((0,o.Z)({},e.id,e),n))}function X(e){I.value=e}function q(e){y.value=e}function H(e){S.value=e}function $(e){w.value=e}function Y(e){u.value=e}function J(n){if(n&&0!==n.new_posts)if(n.titleId){var t=u.value.find((function(e){var t=e.titleId;return n.titleId===t}));t&&(t.new_posts=0)}else{var r,a=null===(r=e.getPreviewCollectionsWithChannels)||void 0===r?void 0:r.findIndex((function(e){return e.channel_ids.includes(n.id)}));if(a<0)return;var o=e.getPreviewCollectionsWithChannels[a].channels.findIndex((function(e){return e.id===n.id}));if(o<0)return;e.previewCollectionsWithChannels.list[a].channels[o].new_posts=0}}function ee(){return ne.apply(this,arguments)}function ne(){return(ne=(0,a.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=U.value===f.i_.COURSE_DISCUSSION?{course:L.value.titleId}:{group:L.value.id},e.next=3,(0,p.B)(d.Z.fetchOnlineUsers(n));case 3:if(!(t=e.sent).isOK){e.next=6;break}return e.abrupt("return",t.data.users);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,n){return re.apply(this,arguments)}function re(){return(re=(0,a.Z)(s().mark((function e(n,t){var r,a,o,i,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.value=null===(r=null==t?void 0:t.setLoading)||void 0===r||r,e.next=3,(0,p.B)(d.Z.fetchPosts(g(g({},n),{},{sort:null!==(a=n.sort)&&void 0!==a?a:I.value,getPinnedPosts:null!==(o=null==t?void 0:t.getPinnedPosts)&&void 0!==o&&o})));case 3:if(!(i=e.sent).isOK||!i.data.posts){e.next=9;break}return l=Array.isArray(i.data.posts)?{}:i.data.posts,(null===(u=null==t?void 0:t.saveData)||void 0===u||u)&&G(l),k.value=!1,e.abrupt("return",l);case 9:return i.isBad&&window.userImpersonation&&window.displayError(i.data.errors),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return oe.apply(this,arguments)}function oe(){return(oe=(0,a.Z)(s().mark((function e(){var n,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.Eh)(d.Z.fetchUserCourses(),!1);case 3:t=e.sent,Y(null!==(n=t.data.userCourses)&&void 0!==n?n:[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error loading user courses: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ie(){return(ie=(0,a.Z)(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=[]).push(t.loadCommunitySettings()),r.push(e.loadPreviewCollectionsWithChannelsState()),n.t0=r,n.next=6,ae();case 6:return n.t1=n.sent,n.t0.push.call(n.t0,n.t1),n.next=10,Promise.all(r);case 10:return n.next=12,e.loadNewPostsCounters();case 12:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function se(){return(se=(0,a.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.B)(d.Z.fetchPostById(n));case 2:(t=e.sent).isOK&&t.data.post&&Q(t.data.post);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=(0,a.Z)(s().mark((function e(n){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.B)(d.Z.deletePost(n));case 2:return(t=e.sent).isOK&&(delete(r=g({},i.value))[n],G(r)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=(0,a.Z)(s().mark((function e(n,t){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.B)(d.Z.deleteComment(n,t));case 2:if(!e.sent.isOK){e.next=12;break}if(r=i.value[n],!((a=r.comments.findIndex((function(e){return e.comment_id===t})))<0)){e.next=9;break}return console.error("Error on comment delete"),e.abrupt("return");case 9:r.comments.splice(a,1),e.next=13;break;case 12:console.error("Error on comment delete");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return ce=(0,a.Z)(s().mark((function e(n){var t,r,a,o,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(i.length>1&&void 0!==i[1])||i[1],r=!(i.length>2&&void 0!==i[2])||i[2],!t||!D.value[n]){e.next=4;break}return e.abrupt("return",D.value[n]);case 4:return e.next=6,(0,p.B)(v.Z.getUserData(n,{socialUserCard:!0}));case 6:if(!(a=e.sent).isOK){e.next=11;break}return o=a.data.user,r&&(D.value[n]=o),e.abrupt("return",o);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)}))),ce.apply(this,arguments)}function de(){return pe.apply(this,arguments)}function pe(){return(pe=(0,a.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.value&&L.value){e.next=2;break}return e.abrupt("return");case 2:return(n=[]).push(te(N.value,{saveData:!1,getPinnedPosts:!0})),n.push(ee()),e.abrupt("return",Promise.all(n).then((function(e){var n=(0,r.Z)(e,2);i.value=n[0],C.value=n[1]})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return(fe=(0,a.Z)(s().mark((function e(r){var a,o,i,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(r),i=U.value===f.i_.COURSE_DISCUSSION,u=i?{save:[L.value.title,L.value.titleId],load:L.value.titleId}:{save:null,load:null},q(null),X(null!==(a=null===(o=L.value)||void 0===o?void 0:o.default_post_sorting)&&void 0!==a?a:b),H(f.aR.FEED),W(null),K(u.save),z(u.load),J(L.value),e.next=12,de();case 12:l=i?g(g({},t.settings.site_social_discussions_global_settings),{},{context:L.value.titleId}):L.value,n.buildPermissions({source:l});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return(ve=(0,a.Z)(s().mark((function n(t){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return q(t),$(null),X(b),H(f.aR.FEED),W(null),K(null),z(null),n.next=9,te(N.value,{getPinnedPosts:!0});case 9:e.resetAggregatedFeedNewPostCount(t);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function he(){return(he=(0,a.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(n),e.next=3,this.fetchPosts(N.value,{getPinnedPosts:!0});case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function me(){return(me=(0,a.Z)(s().mark((function e(n,t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(n,r),K(t),e.next=4,te(N.value,{getPinnedPosts:!0});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return(_e=(0,a.Z)(s().mark((function e(n){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=!i.value[n].is_pinned,V(n,{is_pinned:t}),e.next=5,(0,c.Eh)(d.Z.setPostPinValue(n,{is_pinned:t}),!1);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return{aggregatedPostQuery:R,cachedUserData:D,channelMembers:O,context:y,courses:u,postsSaveContext:Z,feedUserPermissions:(0,l.computed)((function(){return n.permissions})),fetchPostsQuery:N,isPostsLoading:k,isAuthoring:A,isStandaloneRenderer:M,isSocialOnlyForPayingUsers:T,mainView:S,members:C,posts:i,postsSortBy:I,searchTerm:P,selectedChannel:L,selectedChannelId:w,selectedChannelType:U,isStandaloneChannel:B,getStandaloneChannelContext:F,loadUserCourses:ae,prependPost:Q,replacePost:function(e){i.value[e.id]?i.value[e.id]=e:console.error("Post with id ".concat(e.id," not found"))},updateComment:function(e,n){var t=i.value[e];if(t){var r=t.comments.findIndex((function(e){return e.comment_id===n.comment_id}));r<0?console.error("Comment with id ".concat(n.id," not found")):t.comments.splice(r,1,n)}else console.error("Post with id ".concat(e," not found"))},setSearchTerm:W,deleteComment:function(e,n){return le.apply(this,arguments)},deletePostById:function(e){return ue.apply(this,arguments)},fetchPostById:function(e){return se.apply(this,arguments)},fetchPosts:te,getUserData:function(e){return ce.apply(this,arguments)},loadCommunityData:function(){return ie.apply(this,arguments)},selectChannel:function(e){return fe.apply(this,arguments)},selectContext:function(e){return ve.apply(this,arguments)},setMainView:H,setPosts:G,setChannelId:$,setContext:q,setCourses:Y,setIsAuthoring:function(e){A.value=e},setIsStandaloneRenderer:function(e){M.value=e},setSortingAndLoadPosts:function(e){return he.apply(this,arguments)},setPostsContextAndLoadPosts:function(e,n,t){return me.apply(this,arguments)},setStandaloneChannelContext:function(e){j.value=e},togglePinPost:function(e){return _e.apply(this,arguments)},updatePostProperties:V,setAggregatedPostQuery:function(e){R.value=e}}}))},6289:(e,n,t)=>{t.d(n,{Z:()=>a});const r={name:"EmojiPicker",components:{VEmojiPicker:t(13556).WE},data:function(){return{showPicker:!1}},methods:{toggleEmojiPicker:function(){this.showPicker=!this.showPicker},closeEmojiPicker:function(){this.showPicker=!1},selectEmoji:function(e){this.showPicker=!1,this.$emit("emoji-selected",e)}}};const a=(0,t(51900).Z)(r,(function(){var e=this,n=e._self._c;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeEmojiPicker,expression:"closeEmojiPicker"}]},[n("button",{staticClass:"lbl-small lbl-dark-gray cursor-pointer no-select p-0",on:{click:function(n){return n.preventDefault(),e.toggleEmojiPicker.apply(null,arguments)}}},[e._v("\n        😀 Add emoji\n    ")]),e._v(" "),e.showPicker?n("div",{staticClass:"emoji-picker-wrapper"},[n("v-emoji-picker",{on:{select:function(n){return e.selectEmoji(n.data)}}})],1):e._e()])}),[],!1,null,null,null).exports}}]);