/*! For license information please see 53494.237e6da8cc35f7bf1f02.js.LICENSE.txt */
(self.webpackChunkcodeneuron_templates=self.webpackChunkcodeneuron_templates||[]).push([[53494],{85158:e=>{e.exports=function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var i=Math.min(Math.floor(Math.log(e)/Math.log(1024)),s.length-1);e=Number(e/Math.pow(1024,i));var r=s[i];return e>=10||e%1==0?(t?"-":"")+e.toFixed(0)+" "+r:(t?"-":"")+e.toFixed(1)+" "+r}},68937:(e,t,s)=>{const i=s(53149);e.exports=class{constructor(e,t){void 0===t&&(t={}),this.uppy=e,this.opts=t}getPluginState(){const{plugins:e}=this.uppy.getState();return e[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(),this.i18nInit()}i18nInit(){const e=new i([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState()}addTarget(){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}render(){throw new Error("Extend the render method to add your plugin to a DOM element")}update(){}afterUpdate(){}}},13e3:(e,t,s)=>{const i=s(85158),r=s(24193);class o extends Error{constructor(){super(...arguments),this.isRestriction=!0}}"undefined"==typeof AggregateError&&(globalThis.AggregateError=class extends Error{constructor(e,t){super(t),this.errors=e}});e.exports={Restricter:class{constructor(e,t){this.i18n=t,this.getOpts=()=>{const t=e();if(null!=t.restrictions.allowedFileTypes&&!Array.isArray(t.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return t}}validate(e,t){const{maxFileSize:s,minFileSize:n,maxTotalFileSize:a,maxNumberOfFiles:l,allowedFileTypes:u}=this.getOpts().restrictions;if(l&&t.length+1>l)throw new o(`${this.i18n("youCanOnlyUploadX",{smart_count:l})}`);if(u){if(!u.some((t=>t.includes("/")?!!e.type&&r(e.type.replace(/;.*?$/,""),t):!("."!==t[0]||!e.extension)&&e.extension.toLowerCase()===t.slice(1).toLowerCase()))){const e=u.join(", ");throw new o(this.i18n("youCanOnlyUploadFileTypes",{types:e}))}}if(a&&null!=e.size){if(t.reduce(((e,t)=>e+t.size),e.size)>a)throw new o(this.i18n("exceedsSize",{size:i(a),file:e.name}))}if(s&&null!=e.size&&e.size>s)throw new o(this.i18n("exceedsSize",{size:i(s),file:e.name}));if(n&&null!=e.size&&e.size<n)throw new o(this.i18n("inferiorSize",{size:i(n)}))}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(Object.keys(e).length<t)throw new o(this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new o(this.i18n("missingRequiredMetaFieldOnFile",{fileName:e.name})),{requiredMetaFields:s}=this.getOpts().restrictions,i=Object.prototype.hasOwnProperty,r=[];for(const t of s)i.call(e.meta,t)&&""!==e.meta[t]||r.push(t);return{missingFields:r,error:t}}},defaultOptions:{maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},RestrictionError:o}},94649:(e,t,s)=>{function i(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var r=0;function o(e){return"__private_"+r+++"_"+e}const{render:n}=s(6400),a=s(34088),l=s(15589),u=s(68937);var p=o("updateUI");class d extends u{constructor(){super(...arguments),Object.defineProperty(this,p,{writable:!0,value:void 0})}mount(e,t){const s=t.id,r=a(e);if(r){this.isTargetDOMEl=!0;const t=document.createElement("div");return t.classList.add("uppy-Root"),i(this,p)[p]=function(e){let t=null,s=null;return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return s=r,t||(t=Promise.resolve().then((()=>(t=null,e(...s))))),t}}((e=>{this.uppy.getPlugin(this.id)&&(n(this.render(e),t),this.afterUpdate())})),this.uppy.log(`Installing ${s} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(r.innerHTML=""),n(this.render(this.uppy.getState()),t),this.el=t,r.appendChild(t),t.dir=this.opts.direction||l(t)||"ltr",this.onMount(),this.el}let o;if("object"==typeof e&&e instanceof d)o=e;else if("function"==typeof e){const t=e;this.uppy.iteratePlugins((e=>{if(e instanceof t)return o=e,!1}))}if(o)return this.uppy.log(`Installing ${s} to ${o.id}`),this.parent=o,this.el=o.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${s}`);let u=`Invalid target option given to ${s}.`;throw u+="function"==typeof e?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(u)}update(e){var t,s;null!=this.el&&(null==(t=(s=i(this,p))[p])||t.call(s,e))}unmount(){var e;this.isTargetDOMEl&&(null==(e=this.el)||e.remove());this.onUnmount()}onMount(){}onUnmount(){}}e.exports=d},21790:(e,t,s)=>{"use strict";let i,r;function o(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var n=0;function a(e){return"__private_"+n+++"_"+e}const l=s(53149),u=s(44800),{nanoid:p}=s(62961),d=s(93096),h=s(24284),c=s(49187),f=s(79655),g=s(76526),m=s(18585),y=s(82008),{justErrorsLogger:v,debugLogger:_}=s(54519),{Restricter:b,defaultOptions:w,RestrictionError:S}=s(13e3),x=s(48998);var P=a("plugins"),O=a("restricter"),E=a("storeUnsubscribe"),U=a("emitter"),k=a("preProcessors"),F=a("uploaders"),T=a("postProcessors"),j=a("informAndEmit"),$=a("checkRequiredMetaFieldsOnFile"),A=a("checkRequiredMetaFields"),R=a("assertNewUploadAllowed"),C=a("checkAndCreateFileStateObject"),N=a("startIfAutoProceed"),I=a("addListeners"),M=a("updateOnlineStatus"),L=a("createUpload"),z=a("getUpload"),D=a("removeUpload"),q=a("runUpload");i=Symbol.for("uppy test: getPlugins"),r=Symbol.for("uppy test: createUpload");class H{constructor(e){Object.defineProperty(this,q,{value:ee}),Object.defineProperty(this,D,{value:Z}),Object.defineProperty(this,z,{value:J}),Object.defineProperty(this,L,{value:Q}),Object.defineProperty(this,I,{value:Y}),Object.defineProperty(this,N,{value:V}),Object.defineProperty(this,C,{value:K}),Object.defineProperty(this,R,{value:G}),Object.defineProperty(this,A,{value:X}),Object.defineProperty(this,$,{value:W}),Object.defineProperty(this,j,{value:B}),Object.defineProperty(this,P,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:u()}),Object.defineProperty(this,k,{writable:!0,value:new Set}),Object.defineProperty(this,F,{writable:!0,value:new Set}),Object.defineProperty(this,T,{writable:!0,value:new Set}),Object.defineProperty(this,M,{writable:!0,value:this.updateOnlineStatus.bind(this)}),this.defaultLocale=x;const t={id:"uppy",autoProceed:!1,allowMultipleUploads:!0,allowMultipleUploadBatches:!0,debug:!1,restrictions:w,meta:{},onBeforeFileAdded:e=>e,onBeforeUpload:e=>e,store:h(),logger:v,infoTimeout:5e3};this.opts={...t,...e,restrictions:{...t.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=_),this.log(`Using Core v${this.constructor.VERSION}`),this.i18nInit(),this.calculateProgress=d(this.calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:m(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:{...this.opts.meta},info:[],recoveredState:null}),o(this,O)[O]=new b((()=>this.opts),this.i18n),o(this,E)[E]=this.store.subscribe(((e,t,s)=>{this.emit("state-update",e,t,s),this.updateAll(t)})),this.opts.debug&&"undefined"!=typeof window&&(window[this.opts.id]=this),o(this,I)[I]()}emit(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];o(this,U)[U].emit(e,...s)}on(e,t){return o(this,U)[U].on(e,t),this}once(e,t){return o(this,U)[U].once(e,t),this}off(e,t){return o(this,U)[U].off(e,t),this}updateAll(e){this.iteratePlugins((t=>{t.update(e)}))}setState(e){this.store.setState(e)}getState(){return this.store.getState()}get state(){return this.getState()}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Canâ€™t set state for ${e} (the file could have been removed)`);this.setState({files:{...this.getState().files,[e]:{...this.getState().files[e],...t}}})}i18nInit(){const e=new l([this.defaultLocale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e&&e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins((e=>{e.setOptions()})),this.setState()}resetProgress(){const e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},s={};Object.keys(t).forEach((i=>{const r={...t[i]};r.progress={...r.progress,...e},s[i]=r})),this.setState({files:s,totalProgress:0}),this.emit("reset-progress")}addPreProcessor(e){o(this,k)[k].add(e)}removePreProcessor(e){return o(this,k)[k].delete(e)}addPostProcessor(e){o(this,T)[T].add(e)}removePostProcessor(e){return o(this,T)[T].delete(e)}addUploader(e){o(this,F)[F].add(e)}removeUploader(e){return o(this,F)[F].delete(e)}setMeta(e){const t={...this.getState().meta,...e},s={...this.getState().files};Object.keys(s).forEach((t=>{s[t]={...s[t],meta:{...s[t].meta,...e}}})),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:s})}setFileMeta(e,t){const s={...this.getState().files};if(!s[e])return void this.log("Was trying to set metadata for a file that has been removed: ",e);const i={...s[e].meta,...t};s[e]={...s[e],meta:i},this.setState({files:s})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:s}=this.getState(),i=Object.values(e),r=i.filter((e=>{let{progress:t}=e;return!t.uploadComplete&&t.uploadStarted})),o=i.filter((e=>!e.progress.uploadStarted)),n=i.filter((e=>e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess)),a=i.filter((e=>e.progress.uploadStarted)),l=i.filter((e=>e.isPaused)),u=i.filter((e=>e.progress.uploadComplete)),p=i.filter((e=>e.error)),d=r.filter((e=>!e.isPaused)),h=i.filter((e=>e.progress.preprocess||e.progress.postprocess));return{newFiles:o,startedFiles:n,uploadStartedFiles:a,pausedFiles:l,completeFiles:u,erroredFiles:p,inProgressFiles:r,inProgressNotPausedFiles:d,processingFiles:h,isUploadStarted:a.length>0,isAllComplete:100===t&&u.length===i.length&&0===h.length,isAllErrored:!!s&&p.length===i.length,isAllPaused:0!==r.length&&l.length===r.length,isUploadInProgress:r.length>0,isSomeGhost:i.some((e=>e.isGhost))}}validateRestrictions(e,t){void 0===t&&(t=this.getFiles());try{return o(this,O)[O].validate(e,t),{result:!0}}catch(e){return{result:!1,reason:e.message}}}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!(!t[e]||t[e].isGhost)}addFile(e){o(this,R)[R](e);const{files:t}=this.getState();let s=o(this,C)[C](t,e);return t[s.id]&&t[s.id].isGhost&&(s={...t[s.id],data:e.data,isGhost:!1},this.log(`Replaced the blob in the restored ghost file: ${s.name}, ${s.id}`)),this.setState({files:{...t,[s.id]:s}}),this.emit("file-added",s),this.emit("files-added",[s]),this.log(`Added file: ${s.name}, ${s.id}, mime type: ${s.type}`),o(this,N)[N](),s.id}addFiles(e){o(this,R)[R]();const t={...this.getState().files},s=[],i=[];for(let r=0;r<e.length;r++)try{let i=o(this,C)[C](t,e[r]);t[i.id]&&t[i.id].isGhost&&(i={...t[i.id],data:e[r].data,isGhost:!1},this.log(`Replaced blob in a ghost file: ${i.name}, ${i.id}`)),t[i.id]=i,s.push(i)}catch(e){e.isRestriction||i.push(e)}if(this.setState({files:t}),s.forEach((e=>{this.emit("file-added",e)})),this.emit("files-added",s),s.length>5?this.log(`Added batch of ${s.length} files`):Object.keys(s).forEach((e=>{this.log(`Added file: ${s[e].name}\n id: ${s[e].id}\n type: ${s[e].type}`)})),s.length>0&&o(this,N)[N](),i.length>0){let e="Multiple errors occurred while adding files:\n";if(i.forEach((t=>{e+=`\n * ${t.message}`})),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:i.length}),details:e},"error",this.opts.infoTimeout),"function"==typeof AggregateError)throw new AggregateError(i,e);{const t=new Error(e);throw t.errors=i,t}}}removeFiles(e,t){const{files:s,currentUploads:i}=this.getState(),r={...s},o={...i},n=Object.create(null);function a(e){return void 0===n[e]}e.forEach((e=>{s[e]&&(n[e]=s[e],delete r[e])})),Object.keys(o).forEach((e=>{const t=i[e].fileIDs.filter(a);0!==t.length?o[e]={...i[e],fileIDs:t}:delete o[e]}));const l={currentUploads:o,files:r};0===Object.keys(r).length&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),this.calculateTotalProgress();const u=Object.keys(n);u.forEach((e=>{this.emit("file-removed",n[e],t)})),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e,t){void 0===t&&(t=null),this.removeFiles([e],t)}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).uploadComplete)return;const t=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}pauseAll(){const e={...this.getState().files};Object.keys(e).filter((t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted)).forEach((t=>{const s={...e[t],isPaused:!0};e[t]=s})),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter((t=>!e[t].progress.uploadComplete&&e[t].progress.uploadStarted)).forEach((t=>{const s={...e[t],isPaused:!1,error:null};e[t]=s})),this.setState({files:e}),this.emit("resume-all")}retryAll(){const e={...this.getState().files},t=Object.keys(e).filter((t=>e[t].error));if(t.forEach((t=>{const s={...e[t],isPaused:!1,error:null};e[t]=s})),this.setState({files:e,error:null}),this.emit("retry-all",t),0===t.length)return Promise.resolve({successful:[],failed:[]});const s=o(this,L)[L](t,{forceAllowNewUpload:!0});return o(this,q)[q](s)}cancelAll(e){let{reason:t="user"}=void 0===e?{}:e;if(this.emit("cancel-all",{reason:t}),"user"===t){const{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})}}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);const t=o(this,L)[L]([e],{forceAllowNewUpload:!0});return o(this,q)[q](t)}reset(){this.cancelAll(...arguments)}logout(){this.iteratePlugins((e=>{e.provider&&e.provider.logout&&e.provider.logout()}))}calculateProgress(e,t){if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const s=Number.isFinite(t.bytesTotal)&&t.bytesTotal>0;this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:s?Math.round(t.bytesUploaded/t.bytesTotal*100):0}}),this.calculateTotalProgress()}calculateTotalProgress(){const e=this.getFiles().filter((e=>e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess));if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});const t=e.filter((e=>null!=e.progress.bytesTotal)),s=e.filter((e=>null==e.progress.bytesTotal));if(0===t.length){const t=100*e.length,i=s.reduce(((e,t)=>e+t.progress.percentage),0),r=Math.round(i/t*100);return void this.setState({totalProgress:r})}let i=t.reduce(((e,t)=>e+t.progress.bytesTotal),0);const r=i/t.length;i+=r*s.length;let o=0;t.forEach((e=>{o+=e.progress.bytesUploaded})),s.forEach((e=>{o+=r*(e.progress.percentage||0)/100}));let n=0===i?0:Math.round(o/i*100);n>100&&(n=100),this.setState({totalProgress:n}),this.emit("progress",n)}updateOnlineStatus(){void 0===window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,t){if("function"!=typeof e){throw new TypeError(`Expected a plugin class, but got ${null===e?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`)}const s=new e(this,t),i=s.id;if(!i)throw new Error("Your plugin must have an id");if(!s.type)throw new Error("Your plugin must have a type");const r=this.getPlugin(i);if(r){const e=`Already found a plugin named '${r.id}'. Tried to use: '${i}'.\nUppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(e)}return e.VERSION&&this.log(`Using ${i} v${e.VERSION}`),s.type in o(this,P)[P]?o(this,P)[P][s.type].push(s):o(this,P)[P][s.type]=[s],s.install(),this}getPlugin(e){for(const t of Object.values(o(this,P)[P])){const s=t.find((t=>t.id===e));if(null!=s)return s}}[i](e){return o(this,P)[P][e]}iteratePlugins(e){Object.values(o(this,P)[P]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=o(this,P)[P][e.type],s=t.findIndex((t=>t.id===e.id));-1!==s&&t.splice(s,1);const i={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(i)}close(e){let{reason:t}=void 0===e?{}:e;this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll({reason:t}),o(this,E)[E](),this.iteratePlugins((e=>{this.removePlugin(e)})),"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener("online",o(this,M)[M]),window.removeEventListener("offline",o(this,M)[M]))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,s){void 0===t&&(t="info"),void 0===s&&(s=3e3);const i="object"==typeof e;this.setState({info:[...this.getState().info,{type:t,message:i?e.message:e,details:i?e.details:null}]}),setTimeout((()=>this.hideInfo()),s),this.emit("info-visible")}log(e,t){const{logger:s}=this.opts;switch(t){case"error":s.error(e);break;case"warning":s.warn(e);break;default:s.debug(e)}}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?o(this,q)[q](e):(o(this,D)[D](e),Promise.reject(new Error("Nonexistent upload")))}[r](){return o(this,L)[L](...arguments)}addResultData(e,t){if(!o(this,z)[z](e))return void this.log(`Not setting result for an upload that has been removed: ${e}`);const{currentUploads:s}=this.getState(),i={...s[e],result:{...s[e].result,...t}};this.setState({currentUploads:{...s,[e]:i}})}upload(){var e;null!=(e=o(this,P)[P].uploader)&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();const s=this.opts.onBeforeUpload(t);return!1===s?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(s&&"object"==typeof s&&(t=s,this.setState({files:t})),Promise.resolve().then((()=>o(this,O)[O].validateMinNumberOfFiles(t))).catch((e=>{throw o(this,j)[j](e),e})).then((()=>{if(!o(this,A)[A](t))throw new S(this.i18n("missingRequiredMetaField"))})).catch((e=>{throw e})).then((()=>{const{currentUploads:e}=this.getState(),s=Object.values(e).flatMap((e=>e.fileIDs)),i=[];Object.keys(t).forEach((e=>{const t=this.getFile(e);t.progress.uploadStarted||-1!==s.indexOf(e)||i.push(t.id)}));const r=o(this,L)[L](i);return o(this,q)[q](r)})).catch((e=>{throw this.emit("error",e),this.log(e,"error"),e})))}}function B(e,t){const{message:s,details:i=""}=e;e.isRestriction?this.emit("restriction-failed",t,e):this.emit("error",e),this.info({message:s,details:i},"error",this.opts.infoTimeout),this.log(`${s} ${i}`.trim(),"error")}function W(e){const{missingFields:t,error:s}=o(this,O)[O].getMissingRequiredMetaFields(e);return!(t.length>0)||(this.setFileState(e.id,{missingRequiredMetaFields:t}),this.log(s.message),this.emit("restriction-failed",e,s),!1)}function X(e){let t=!0;for(const s of Object.values(e))o(this,$)[$](s)||(t=!1);return t}function G(e){const{allowNewUpload:t}=this.getState();if(!1===t){const t=new S(this.i18n("noMoreFilesAllowed"));throw o(this,j)[j](t,e),t}}function K(e,t){const s=c(t),i=y(s,t),r=f(i).extension,n=Boolean(t.isRemote),a=g({...t,type:s});if(this.checkIfFileAlreadyExists(a)){const e=new S(this.i18n("noDuplicates",{fileName:i}));throw o(this,j)[j](e,t),e}const l=t.meta||{};l.name=i,l.type=s;const u=Number.isFinite(t.data.size)?t.data.size:null;let p={source:t.source||"",id:a,name:i,extension:r||"",meta:{...this.getState().meta,...l},type:s,data:t.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:u,uploadComplete:!1,uploadStarted:null},size:u,isRemote:n,remote:t.remote||"",preview:t.preview};const d=this.opts.onBeforeFileAdded(p,e);if(!1===d){const e=new S("Cannot add the file because onBeforeFileAdded returned false.");throw this.emit("restriction-failed",t,e),e}"object"==typeof d&&null!==d&&(p=d);try{const t=Object.keys(e).map((t=>e[t]));o(this,O)[O].validate(p,t)}catch(e){throw o(this,j)[j](e,p),e}return p}function V(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout((()=>{this.scheduledAutoProceed=null,this.upload().catch((e=>{e.isRestriction||this.log(e.stack||e.message||e)}))}),4))}function Y(){const e=(e,t,s)=>{let i=e.message||"Unknown error";e.details&&(i+=` ${e.details}`),this.setState({error:i}),null!=t&&t.id in this.getState().files&&this.setFileState(t.id,{error:i,response:s})};this.on("error",e),this.on("upload-error",((t,s,i)=>{if(e(s,t,i),"object"==typeof s&&s.message){const e=new Error(s.message);e.details=s.message,s.details&&(e.details+=` ${s.details}`),e.message=this.i18n("failedToUpload",{file:t.name}),o(this,j)[j](e)}else o(this,j)[j](s)})),this.on("upload",(()=>{this.setState({error:null})})),this.on("upload-started",(e=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:e.size}}):this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`)})),this.on("upload-progress",this.calculateProgress),this.on("upload-success",((e,t)=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const s=this.getFile(e.id).progress;this.setFileState(e.id,{progress:{...s,postprocess:o(this,T)[T].size>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:s.bytesTotal},response:t,uploadURL:t.uploadURL,isPaused:!1}),null==e.size&&this.setFileState(e.id,{size:t.bytesUploaded||s.bytesTotal}),this.calculateTotalProgress()})),this.on("preprocess-progress",((e,t)=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,preprocess:t}}):this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`)})),this.on("preprocess-complete",(e=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.preprocess,this.setState({files:t})})),this.on("postprocess-progress",((e,t)=>{null!=e&&this.getFile(e.id)?this.setFileState(e.id,{progress:{...this.getState().files[e.id].progress,postprocess:t}}):this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`)})),this.on("postprocess-complete",(e=>{if(null==e||!this.getFile(e.id))return void this.log(`Not setting progress for a file that has been removed: ${null==e?void 0:e.id}`);const t={...this.getState().files};t[e.id]={...t[e.id],progress:{...t[e.id].progress}},delete t[e.id].progress.postprocess,this.setState({files:t})})),this.on("restored",(()=>{this.calculateTotalProgress()})),this.on("dashboard:file-edit-complete",(e=>{e&&o(this,$)[$](e)})),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("online",o(this,M)[M]),window.addEventListener("offline",o(this,M)[M]),setTimeout(o(this,M)[M],3e3))}function Q(e,t){void 0===t&&(t={});const{forceAllowNewUpload:s=!1}=t,{allowNewUpload:i,currentUploads:r}=this.getState();if(!i&&!s)throw new Error("Cannot create a new upload: already uploading.");const o=p();return this.emit("upload",{id:o,fileIDs:e}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploadBatches&&!1!==this.opts.allowMultipleUploads,currentUploads:{...r,[o]:{fileIDs:e,step:0,result:{}}}}),o}function J(e){const{currentUploads:t}=this.getState();return t[e]}function Z(e){const t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})}async function ee(e){let{currentUploads:t}=this.getState(),s=t[e];const i=s.step||0,r=[...o(this,k)[k],...o(this,F)[F],...o(this,T)[T]];try{for(let o=i;o<r.length&&s;o++){const i=r[o],n={...s,step:o};this.setState({currentUploads:{...t,[e]:n}}),await i(n.fileIDs,e),t=this.getState().currentUploads,s=t[e]}}catch(t){throw o(this,D)[D](e),t}if(s){s.fileIDs.forEach((e=>{const t=this.getFile(e);t&&t.progress.postprocess&&this.emit("postprocess-complete",t)}));const i=s.fileIDs.map((e=>this.getFile(e))),r=i.filter((e=>!e.error)),o=i.filter((e=>e.error));await this.addResultData(e,{successful:r,failed:o,uploadID:e}),t=this.getState().currentUploads,s=t[e]}let n;return s&&(n=s.result,this.emit("complete",n),o(this,D)[D](e)),null==n&&this.log(`Not setting result for an upload that has been removed: ${e}`),n}H.VERSION="2.2.0",e.exports=H},82008:e=>{e.exports=function(e,t){return t.name?t.name:"image"===e.split("/")[0]?`${e.split("/")[0]}.${e.split("/")[1]}`:"noname"}},49429:(e,t,s)=>{"use strict";const i=s(21790),r=s(94649),o=s(68937),{debugLogger:n}=s(54519);e.exports=i,e.exports.Uppy=i,e.exports.UIPlugin=r,e.exports.BasePlugin=o,e.exports.debugLogger=n},48998:e=>{e.exports={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",emptyFolderAdded:"No files were added from empty folder",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}}},54519:(e,t,s)=>{const i=s(90152),r={debug:()=>{},warn:()=>{},error:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return console.error(`[Uppy] [${i()}]`,...t)}},o={debug:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return console.debug(`[Uppy] [${i()}]`,...t)},warn:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return console.warn(`[Uppy] [${i()}]`,...t)},error:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return console.error(`[Uppy] [${i()}]`,...t)}};e.exports={justErrorsLogger:r,debugLogger:o}},18585:e=>{e.exports=function(e){if(null==e&&(e="undefined"!=typeof navigator?navigator.userAgent:null),!e)return!0;const t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;const s=t[1];let[i,r]=s.split(".");return i=parseInt(i,10),r=parseInt(r,10),i<15||15===i&&r<15063||(i>18||18===i&&r>=18218)}},93096:(e,t,s)=>{var i="Expected a function",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,u="object"==typeof s.g&&s.g&&s.g.Object===Object&&s.g,p="object"==typeof self&&self&&self.Object===Object&&self,d=u||p||Function("return this")(),h=Object.prototype.toString,c=Math.max,f=Math.min,g=function(){return d.Date.now()};function m(e,t,s){var r,o,n,a,l,u,p=0,d=!1,h=!1,m=!0;if("function"!=typeof e)throw new TypeError(i);function _(t){var s=r,i=o;return r=o=void 0,p=t,a=e.apply(i,s)}function b(e){return p=e,l=setTimeout(S,t),d?_(e):a}function w(e){var s=e-u;return void 0===u||s>=t||s<0||h&&e-p>=n}function S(){var e=g();if(w(e))return x(e);l=setTimeout(S,function(e){var s=t-(e-u);return h?f(s,n-(e-p)):s}(e))}function x(e){return l=void 0,m&&r?_(e):(r=o=void 0,a)}function P(){var e=g(),s=w(e);if(r=arguments,o=this,u=e,s){if(void 0===l)return b(u);if(h)return l=setTimeout(S,t),_(u)}return void 0===l&&(l=setTimeout(S,t)),a}return t=v(t)||0,y(s)&&(d=!!s.leading,n=(h="maxWait"in s)?c(v(s.maxWait)||0,t):n,m="trailing"in s?!!s.trailing:m),P.cancel=function(){void 0!==l&&clearTimeout(l),p=0,r=u=o=l=void 0},P.flush=function(){return void 0===l?a:x(g())},P}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var s=n.test(e);return s||a.test(e)?l(e.slice(2),s?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,s){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(i);return y(s)&&(r="leading"in s?!!s.leading:r,o="trailing"in s?!!s.trailing:o),m(e,t,{leading:r,maxWait:t,trailing:o})}},24193:(e,t,s)=>{var i=s(1196),r=/[\/\+\.]/;e.exports=function(e,t){function s(t){var s=i(t,e,r);return s&&s.length>=2}return t?s(t.split(";")[0]):s}},44800:e=>{e.exports=function(){var e={},t=e._fns={};return e.emit=function(e,s,i,r,o,n,a){var l=function(e){var s=t[e]?t[e]:[],i=e.indexOf(":"),r=-1===i?[e]:[e.substring(0,i),e.substring(i+1)],o=Object.keys(t),n=0,a=o.length;for(;n<a;n++){var l=o[n];if("*"===l&&(s=s.concat(t[l])),2===r.length&&r[0]===l){s=s.concat(t[l]);break}}return s}(e);l.length&&function(e,t,s){var i=0,r=t.length;for(;i<r&&t[i];i++)t[i].event=e,t[i].apply(t[i],s)}(e,l,[s,i,r,o,n,a])},e.on=function(e,s){t[e]||(t[e]=[]),t[e].push(s)},e.once=function(t,s){this.on(t,(function i(){s.apply(this,arguments),e.off(t,i)}))},e.off=function(e,t){var s=[];if(e&&t)for(var i=this._fns[e],r=0,o=i?i.length:0;r<o;r++)i[r]!==t&&s.push(i[r]);s.length?this._fns[e]=s:delete this._fns[e]},e}},6400:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Component:()=>_,Fragment:()=>v,cloneElement:()=>z,createContext:()=>D,createElement:()=>g,createRef:()=>y,h:()=>g,hydrate:()=>L,isValidElement:()=>n,options:()=>r,render:()=>M,toChildArray:()=>E});var i,r,o,n,a,l,u,p={},d=[],h=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(e,t){for(var s in t)e[s]=t[s];return e}function f(e){var t=e.parentNode;t&&t.removeChild(e)}function g(e,t,s){var r,o,n,a={};for(n in t)"key"==n?r=t[n]:"ref"==n?o=t[n]:a[n]=t[n];if(arguments.length>2&&(a.children=arguments.length>3?i.call(arguments,2):s),"function"==typeof e&&null!=e.defaultProps)for(n in e.defaultProps)void 0===a[n]&&(a[n]=e.defaultProps[n]);return m(e,a,r,o,null)}function m(e,t,s,i,n){var a={type:e,props:t,key:s,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==n?++o:n};return null==n&&null!=r.vnode&&r.vnode(a),a}function y(){return{current:null}}function v(e){return e.children}function _(e,t){this.props=e,this.context=t}function b(e,t){if(null==t)return e.__?b(e.__,e.__.__k.indexOf(e)+1):null;for(var s;t<e.__k.length;t++)if(null!=(s=e.__k[t])&&null!=s.__e)return s.__e;return"function"==typeof e.type?b(e):null}function w(e){var t,s;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(s=e.__k[t])&&null!=s.__e){e.__e=e.__c.base=s.__e;break}return w(e)}}function S(e){(!e.__d&&(e.__d=!0)&&a.push(e)&&!x.__r++||l!==r.debounceRendering)&&((l=r.debounceRendering)||setTimeout)(x)}function x(){for(var e;x.__r=a.length;)e=a.sort((function(e,t){return e.__v.__b-t.__v.__b})),a=[],e.some((function(e){var t,s,i,r,o,n;e.__d&&(o=(r=(t=e).__v).__e,(n=t.__P)&&(s=[],(i=c({},r)).__v=r.__v+1,$(n,r,i,t.__n,void 0!==n.ownerSVGElement,null!=r.__h?[o]:null,s,null==o?b(r):o,r.__h),A(s,r),r.__e!=o&&w(r)))}))}function P(e,t,s,i,r,o,n,a,l,u){var h,c,f,g,y,_,w,S=i&&i.__k||d,x=S.length;for(s.__k=[],h=0;h<t.length;h++)if(null!=(g=s.__k[h]=null==(g=t[h])||"boolean"==typeof g?null:"string"==typeof g||"number"==typeof g||"bigint"==typeof g?m(null,g,null,null,g):Array.isArray(g)?m(v,{children:g},null,null,null):g.__b>0?m(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)){if(g.__=s,g.__b=s.__b+1,null===(f=S[h])||f&&g.key==f.key&&g.type===f.type)S[h]=void 0;else for(c=0;c<x;c++){if((f=S[c])&&g.key==f.key&&g.type===f.type){S[c]=void 0;break}f=null}$(e,g,f=f||p,r,o,n,a,l,u),y=g.__e,(c=g.ref)&&f.ref!=c&&(w||(w=[]),f.ref&&w.push(f.ref,null,g),w.push(c,g.__c||y,g)),null!=y?(null==_&&(_=y),"function"==typeof g.type&&g.__k===f.__k?g.__d=l=O(g,l,e):l=U(e,g,f,S,y,l),"function"==typeof s.type&&(s.__d=l)):l&&f.__e==l&&l.parentNode!=e&&(l=b(f))}for(s.__e=_,h=x;h--;)null!=S[h]&&N(S[h],S[h]);if(w)for(h=0;h<w.length;h++)C(w[h],w[++h],w[++h])}function O(e,t,s){for(var i,r=e.__k,o=0;r&&o<r.length;o++)(i=r[o])&&(i.__=e,t="function"==typeof i.type?O(i,t,s):U(s,i,i,r,i.__e,t));return t}function E(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){E(e,t)})):t.push(e)),t}function U(e,t,s,i,r,o){var n,a,l;if(void 0!==t.__d)n=t.__d,t.__d=void 0;else if(null==s||r!=o||null==r.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(r),n=null;else{for(a=o,l=0;(a=a.nextSibling)&&l<i.length;l+=1)if(a==r)break e;e.insertBefore(r,o),n=o}return void 0!==n?n:r.nextSibling}function k(e,t,s){"-"===t[0]?e.setProperty(t,s):e[t]=null==s?"":"number"!=typeof s||h.test(t)?s:s+"px"}function F(e,t,s,i,r){var o;e:if("style"===t)if("string"==typeof s)e.style.cssText=s;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)s&&t in s||k(e.style,t,"");if(s)for(t in s)i&&s[t]===i[t]||k(e.style,t,s[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=s,s?i||e.addEventListener(t,o?j:T,o):e.removeEventListener(t,o?j:T,o);else if("dangerouslySetInnerHTML"!==t){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==s?"":s;break e}catch(e){}"function"==typeof s||(null==s||!1===s&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,s))}}function T(e){this.l[e.type+!1](r.event?r.event(e):e)}function j(e){this.l[e.type+!0](r.event?r.event(e):e)}function $(e,t,s,i,o,n,a,l,u){var p,d,h,f,g,m,y,b,w,S,x,O,E,U,k,F=t.type;if(void 0!==t.constructor)return null;null!=s.__h&&(u=s.__h,l=t.__e=s.__e,t.__h=null,n=[l]),(p=r.__b)&&p(t);try{e:if("function"==typeof F){if(b=t.props,w=(p=F.contextType)&&i[p.__c],S=p?w?w.props.value:p.__:i,s.__c?y=(d=t.__c=s.__c).__=d.__E:("prototype"in F&&F.prototype.render?t.__c=d=new F(b,S):(t.__c=d=new _(b,S),d.constructor=F,d.render=I),w&&w.sub(d),d.props=b,d.state||(d.state={}),d.context=S,d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=F.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=c({},d.__s)),c(d.__s,F.getDerivedStateFromProps(b,d.__s))),f=d.props,g=d.state,h)null==F.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==F.getDerivedStateFromProps&&b!==f&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(b,S),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(b,d.__s,S)||t.__v===s.__v){for(d.props=b,d.state=d.__s,t.__v!==s.__v&&(d.__d=!1),d.__v=t,t.__e=s.__e,t.__k=s.__k,t.__k.forEach((function(e){e&&(e.__=t)})),x=0;x<d._sb.length;x++)d.__h.push(d._sb[x]);d._sb=[],d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(b,d.__s,S),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(f,g,m)}))}if(d.context=S,d.props=b,d.__v=t,d.__P=e,O=r.__r,E=0,"prototype"in F&&F.prototype.render){for(d.state=d.__s,d.__d=!1,O&&O(t),p=d.render(d.props,d.state,d.context),U=0;U<d._sb.length;U++)d.__h.push(d._sb[U]);d._sb=[]}else do{d.__d=!1,O&&O(t),p=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++E<25);d.state=d.__s,null!=d.getChildContext&&(i=c(c({},i),d.getChildContext())),h||null==d.getSnapshotBeforeUpdate||(m=d.getSnapshotBeforeUpdate(f,g)),k=null!=p&&p.type===v&&null==p.key?p.props.children:p,P(e,Array.isArray(k)?k:[k],t,s,i,o,n,a,l,u),d.base=t.__e,t.__h=null,d.__h.length&&a.push(d),y&&(d.__E=d.__=null),d.__e=!1}else null==n&&t.__v===s.__v?(t.__k=s.__k,t.__e=s.__e):t.__e=R(s.__e,t,s,i,o,n,a,u);(p=r.diffed)&&p(t)}catch(e){t.__v=null,(u||null!=n)&&(t.__e=l,t.__h=!!u,n[n.indexOf(l)]=null),r.__e(e,t,s)}}function A(e,t){r.__c&&r.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){r.__e(e,t.__v)}}))}function R(e,t,s,r,o,n,a,l){var u,d,h,c=s.props,g=t.props,m=t.type,y=0;if("svg"===m&&(o=!0),null!=n)for(;y<n.length;y++)if((u=n[y])&&"setAttribute"in u==!!m&&(m?u.localName===m:3===u.nodeType)){e=u,n[y]=null;break}if(null==e){if(null===m)return document.createTextNode(g);e=o?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,g.is&&g),n=null,l=!1}if(null===m)c===g||l&&e.data===g||(e.data=g);else{if(n=n&&i.call(e.childNodes),d=(c=s.props||p).dangerouslySetInnerHTML,h=g.dangerouslySetInnerHTML,!l){if(null!=n)for(c={},y=0;y<e.attributes.length;y++)c[e.attributes[y].name]=e.attributes[y].value;(h||d)&&(h&&(d&&h.__html==d.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||""))}if(function(e,t,s,i,r){var o;for(o in s)"children"===o||"key"===o||o in t||F(e,o,null,s[o],i);for(o in t)r&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||s[o]===t[o]||F(e,o,t[o],s[o],i)}(e,g,c,o,l),h)t.__k=[];else if(y=t.props.children,P(e,Array.isArray(y)?y:[y],t,s,r,o&&"foreignObject"!==m,n,a,n?n[0]:s.__k&&b(s,0),l),null!=n)for(y=n.length;y--;)null!=n[y]&&f(n[y]);l||("value"in g&&void 0!==(y=g.value)&&(y!==e.value||"progress"===m&&!y||"option"===m&&y!==c.value)&&F(e,"value",y,c.value,!1),"checked"in g&&void 0!==(y=g.checked)&&y!==e.checked&&F(e,"checked",y,c.checked,!1))}return e}function C(e,t,s){try{"function"==typeof e?e(t):e.current=t}catch(e){r.__e(e,s)}}function N(e,t,s){var i,o;if(r.unmount&&r.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||C(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){r.__e(e,t)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&N(i[o],t,s||"function"!=typeof e.type);s||null==e.__e||f(e.__e),e.__=e.__e=e.__d=void 0}function I(e,t,s){return this.constructor(e,s)}function M(e,t,s){var o,n,a;r.__&&r.__(e,t),n=(o="function"==typeof s)?null:s&&s.__k||t.__k,a=[],$(t,e=(!o&&s||t).__k=g(v,null,[e]),n||p,p,void 0!==t.ownerSVGElement,!o&&s?[s]:n?null:t.firstChild?i.call(t.childNodes):null,a,!o&&s?s:n?n.__e:t.firstChild,o),A(a,e)}function L(e,t){M(e,t,L)}function z(e,t,s){var r,o,n,a=c({},e.props);for(n in t)"key"==n?r=t[n]:"ref"==n?o=t[n]:a[n]=t[n];return arguments.length>2&&(a.children=arguments.length>3?i.call(arguments,2):s),m(e.type,a,r||e.key,o||e.ref,null)}function D(e,t){var s={__c:t="__cC"+u++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var s,i;return this.getChildContext||(s=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&s.some(S)},this.sub=function(e){s.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){s.splice(s.indexOf(e),1),t&&t.call(e)}}),e.children}};return s.Provider.__=s.Consumer.contextType=s}i=d.slice,r={__e:function(e,t,s,i){for(var r,o,n;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&null!=o.getDerivedStateFromError&&(r.setState(o.getDerivedStateFromError(e)),n=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),n=r.__d),n)return r.__E=r}catch(t){e=t}throw e}},o=0,n=function(e){return null!=e&&void 0===e.constructor},_.prototype.setState=function(e,t){var s;s=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(c({},s),this.props)),e&&c(s,e),null!=e&&this.__v&&(t&&this._sb.push(t),S(this))},_.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),S(this))},_.prototype.render=v,a=[],x.__r=0,u=0},1196:e=>{"use strict";function t(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}t.prototype.match=function(e){var t,s,i=!0,r=this.parts,o=r.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(s=(e||"").split(this.separator),t=0;i&&t<o;t++)"*"!==r[t]&&(i=t<s.length&&r[t]===s[t]);i=i&&s}else i=!1;else if("function"==typeof e.splice)for(i=[],t=e.length;t--;)this.match(e[t])&&(i[i.length]=e[t]);else if("object"==typeof e)for(var n in i={},e)this.match(n)&&(i[n]=e[n]);return i},e.exports=function(e,s,i){var r=new t(e,i||/[\/\.]/);return void 0!==s?r.match(s):r}},73370:e=>{"use strict";class t extends Error{constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}}e.exports=t},74125:(e,t,s)=>{"use strict";var i=s(45421);const r=s(45189);e.exports=class extends r{constructor(e,t){super(e,t),this.provider=t.provider,this.id=this.provider,this.name=this.opts.name||this.id.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),this.pluginId=this.opts.pluginId,this.tokenKey=`companion-${this.pluginId}-auth-token`,this.companionKeysParams=this.opts.companionKeysParams,this.preAuthToken=null}headers(){return Promise.all([super.headers(),this.getAuthToken()]).then((e=>{let[t,s]=e;const i={};return s&&(i["uppy-auth-token"]=s),this.companionKeysParams&&(i["uppy-credentials-params"]=btoa(JSON.stringify({params:this.companionKeysParams}))),{...t,...i}}))}onReceiveResponse(e){e=super.onReceiveResponse(e);const t=this.uppy.getPlugin(this.pluginId),s=t.getPluginState().authenticated?401!==e.status:e.status<400;return t.setPluginState({authenticated:s}),e}setAuthToken(e){return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey,e)}getAuthToken(){return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)}async ensurePreAuth(){if(this.companionKeysParams&&!this.preAuthToken&&(await this.fetchPreAuthToken(),!this.preAuthToken))throw new Error("Could not load authentication data required for third-party login. Please try again later.")}authUrl(e){void 0===e&&(e={});const t=new URLSearchParams(e);return this.preAuthToken&&t.set("uppyPreAuthToken",this.preAuthToken),`${this.hostname}/${this.id}/connect?${t}`}fileUrl(e){return`${this.hostname}/${this.id}/get/${e}`}async fetchPreAuthToken(){if(this.companionKeysParams)try{const e=await this.post(`${this.id}/preauth/`,{params:this.companionKeysParams});this.preAuthToken=e.token}catch(e){this.uppy.log(`[CompanionClient] unable to fetch preAuthToken ${e}`,"warning")}}list(e){return this.get(`${this.id}/list/${e||""}`)}logout(){return this.get(`${this.id}/logout`).then((e=>Promise.all([e,this.uppy.getPlugin(this.pluginId).storage.removeItem(this.tokenKey)]))).then((e=>{let[t]=e;return t}))}static initPlugin(e,t,s){if(e.type="acquirer",e.files=[],s&&(e.opts={...s,...t}),t.serverUrl||t.serverPattern)throw new Error("`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`");if(t.companionAllowedHosts){const s=t.companionAllowedHosts;if(!("string"==typeof s||Array.isArray(s)||s instanceof RegExp))throw new TypeError(`${e.id}: the option "companionAllowedHosts" must be one of string, Array, RegExp`);e.opts.companionAllowedHosts=s}else/^(?!https?:\/\/).*$/i.test(t.companionUrl)?e.opts.companionAllowedHosts=`https://${t.companionUrl.replace(/^\/\//,"")}`:e.opts.companionAllowedHosts=new URL(t.companionUrl).origin;e.storage=e.opts.storage||i}}},45189:(e,t,s)=>{"use strict";let i;function r(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var o=0;function n(e){return"__private_"+o+++"_"+e}const a=s(10104),l=s(8391),u=s(73370);async function p(e){if(401===e.status)throw new u;const t=e.json();if(e.status<200||e.status>300){let s=`Failed request with status: ${e.status}. ${e.statusText}`;try{const e=await t;s=e.message?`${s} message: ${e.message}`:s,s=e.requestId?`${s} request-Id: ${e.requestId}`:s}finally{throw new Error(s)}}return t}var d=n("companionHeaders"),h=n("getPostResponseFunc"),c=n("getUrl"),f=n("errorHandler");i=Symbol.for("uppy test: getCompanionHeaders");class g{constructor(e,t){Object.defineProperty(this,f,{value:y}),Object.defineProperty(this,c,{value:m}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:e=>t=>e?t:this.onReceiveResponse(t)}),this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this),this.allowedHeaders=["accept","content-type","uppy-auth-token"],this.preflightDone=!1,r(this,d)[d]=null==t?void 0:t.companionHeaders}setCompanionHeaders(e){r(this,d)[d]=e}[i](){return r(this,d)[d]}get hostname(){const{companion:e}=this.uppy.getState(),t=this.opts.companionUrl;return(e&&e[t]?e[t]:t).replace(/\/$/,"")}headers(){return Promise.resolve({...g.defaultHeaders,...r(this,d)[d]})}onReceiveResponse(e){const t=this.uppy.getState().companion||{},s=this.opts.companionUrl,{headers:i}=e;return i.has("i-am")&&i.get("i-am")!==t[s]&&this.uppy.setState({companion:{...t,[s]:i.get("i-am")}}),e}preflight(e){return this.preflightDone?Promise.resolve(this.allowedHeaders.slice()):fetch(r(this,c)[c](e),{method:"OPTIONS"}).then((e=>(e.headers.has("access-control-allow-headers")&&(this.allowedHeaders=e.headers.get("access-control-allow-headers").split(",").map((e=>e.trim().toLowerCase()))),this.preflightDone=!0,this.allowedHeaders.slice()))).catch((e=>(this.uppy.log(`[CompanionClient] unable to make preflight request ${e}`,"warning"),this.preflightDone=!0,this.allowedHeaders.slice())))}preflightAndHeaders(e){return Promise.all([this.preflight(e),this.headers()]).then((e=>{let[t,s]=e;return Object.keys(s).forEach((e=>{t.includes(e.toLowerCase())||(this.uppy.log(`[CompanionClient] excluding disallowed header ${e}`),delete s[e])})),s}))}get(e,t){return this.preflightAndHeaders(e).then((t=>a(r(this,c)[c](e),{method:"get",headers:t,credentials:this.opts.companionCookiesRule||"same-origin"}))).then(r(this,h)[h](t)).then(p).catch(r(this,f)[f]("get",e))}post(e,t,s){const i="post";return this.preflightAndHeaders(e).then((s=>a(r(this,c)[c](e),{method:i,headers:s,credentials:this.opts.companionCookiesRule||"same-origin",body:JSON.stringify(t)}))).then(r(this,h)[h](s)).then(p).catch(r(this,f)[f](i,e))}delete(e,t,s){const i="delete";return this.preflightAndHeaders(e).then((s=>a(`${this.hostname}/${e}`,{method:i,headers:s,credentials:this.opts.companionCookiesRule||"same-origin",body:t?JSON.stringify(t):null}))).then(r(this,h)[h](s)).then(p).catch(r(this,f)[f](i,e))}}function m(e){return/^(https?:|)\/\//.test(e)?e:`${this.hostname}/${e}`}function y(e,t){return s=>{var i;return null!=(i=s)&&i.isAuthError||(s=new l(`Could not ${e} ${r(this,c)[c](t)}`,{cause:s})),Promise.reject(s)}}g.VERSION="2.2.2",g.defaultHeaders={Accept:"application/json","Content-Type":"application/json","Uppy-Versions":`@uppy/companion-client=${g.VERSION}`},e.exports=g},51863:(e,t,s)=>{"use strict";const i=s(45189);e.exports=class extends i{constructor(e,t){super(e,t),this.provider=t.provider,this.id=this.provider,this.name=this.opts.name||this.id.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "),this.pluginId=this.opts.pluginId}fileUrl(e){return`${this.hostname}/search/${this.id}/get/${e}`}search(e,t){return this.get(`search/${this.id}/list?q=${encodeURIComponent(e)}${t?`&${t}`:""}`)}}},20773:(e,t,s)=>{"use strict";let i,r;function o(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var n=0;function a(e){return"__private_"+n+++"_"+e}const l=s(44800);var u=a("queued"),p=a("emitter"),d=a("isOpen"),h=a("socket"),c=a("handleMessage");i=Symbol.for("uppy test: getSocket"),r=Symbol.for("uppy test: getQueued");e.exports=class{constructor(e){Object.defineProperty(this,u,{writable:!0,value:[]}),Object.defineProperty(this,p,{writable:!0,value:l()}),Object.defineProperty(this,d,{writable:!0,value:!1}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:e=>{try{const t=JSON.parse(e.data);this.emit(t.action,t.payload)}catch(e){console.log(e)}}}),this.opts=e,e&&!1===e.autoOpen||this.open()}get isOpen(){return o(this,d)[d]}[i](){return o(this,h)[h]}[r](){return o(this,u)[u]}open(){o(this,h)[h]=new WebSocket(this.opts.target),o(this,h)[h].onopen=()=>{for(o(this,d)[d]=!0;o(this,u)[u].length>0&&o(this,d)[d];){const e=o(this,u)[u].shift();this.send(e.action,e.payload)}},o(this,h)[h].onclose=()=>{o(this,d)[d]=!1},o(this,h)[h].onmessage=o(this,c)[c]}close(){var e;null==(e=o(this,h)[h])||e.close()}send(e,t){o(this,d)[d]?o(this,h)[h].send(JSON.stringify({action:e,payload:t})):o(this,u)[u].push({action:e,payload:t})}on(e,t){o(this,p)[p].on(e,t)}emit(e,t){o(this,p)[p].emit(e,t)}once(e,t){o(this,p)[p].once(e,t)}}},53145:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socket=t.SearchProvider=t.RequestClient=t.Provider=void 0;const i=s(45189);t.RequestClient=i;const r=s(74125);t.Provider=r;const o=s(51863);t.SearchProvider=o;const n=s(20773);t.Socket=n},45421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getItem=function(e){return Promise.resolve(localStorage.getItem(e))},t.removeItem=function(e){return new Promise((t=>{localStorage.removeItem(e),t()}))},t.setItem=function(e,t){return new Promise((s=>{localStorage.setItem(e,t),s()}))}},24284:e=>{"use strict";var t=0;function s(e){return"__private_"+t+++"_"+e}var i=s("publish");class r{constructor(){Object.defineProperty(this,i,{value:o}),this.state={},this.callbacks=[]}getState(){return this.state}setState(e){const t={...this.state},s={...this.state,...e};this.state=s,function(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}(this,i)[i](t,s,e)}subscribe(e){return this.callbacks.push(e),()=>{this.callbacks.splice(this.callbacks.indexOf(e),1)}}}function o(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this.callbacks.forEach((e=>{e(...t)}))}r.VERSION="2.1.1",e.exports=function(){return new r}},8391:(e,t,s)=>{"use strict";const i=s(83689);class r extends Error{constructor(e,t){void 0===t&&(t={}),super(e),this.cause=t.cause,this.cause&&i(this.cause,"isNetworkError")&&(this.isNetworkError=this.cause.isNetworkError)}}e.exports=r},12328:e=>{"use strict";function t(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var s=0;function i(e){return"__private_"+s+++"_"+e}var r=i("emitter"),o=i("events");e.exports=class{constructor(e){Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:[]}),t(this,r)[r]=e}on(e,s){return t(this,o)[o].push([e,s]),t(this,r)[r].on(e,s)}remove(){for(const[e,s]of t(this,o)[o].splice(0))t(this,r)[r].off(e,s)}}},71516:e=>{"use strict";class t extends Error{constructor(e,t){void 0===t&&(t=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}}e.exports=t},43822:e=>{"use strict";function t(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var s=0;function i(e){return"__private_"+s+++"_"+e}var r=i("aliveTimer"),o=i("isDone"),n=i("onTimedOut"),a=i("timeout");e.exports=class{constructor(e,s){Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:!1}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),t(this,a)[a]=e,t(this,n)[n]=s}progress(){t(this,o)[o]||t(this,a)[a]>0&&(clearTimeout(t(this,r)[r]),t(this,r)[r]=setTimeout(t(this,n)[n],t(this,a)[a]))}done(){t(this,o)[o]||(clearTimeout(t(this,r)[r]),t(this,r)[r]=null,t(this,o)[o]=!0)}}},99628:(e,t)=>{"use strict";function s(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.internalRateLimitedQueue=t.RateLimitedQueue=void 0;var i=0;function r(e){return"__private_"+i+++"_"+e}function o(){return new Error("Cancelled")}var n=r("activeRequests"),a=r("queuedHandlers"),l=r("paused"),u=r("pauseTimer"),p=r("downLimit"),d=r("upperLimit"),h=r("rateLimitingTimer"),c=r("call"),f=r("queueNext"),g=r("next"),m=r("queue"),y=r("dequeue"),v=r("resume"),_=r("increaseLimit");function b(e){s(this,n)[n]+=1;let t,i=!1;try{t=e()}catch(e){throw s(this,n)[n]-=1,e}return{abort:()=>{i||(i=!0,s(this,n)[n]-=1,t(),s(this,f)[f]())},done:()=>{i||(i=!0,s(this,n)[n]-=1,s(this,f)[f]())}}}function w(){queueMicrotask((()=>s(this,g)[g]()))}function S(){if(s(this,l)[l]||s(this,n)[n]>=this.limit)return;if(0===s(this,a)[a].length)return;const e=s(this,a)[a].shift(),t=s(this,c)[c](e.fn);e.abort=t.abort,e.done=t.done}function x(e,t){void 0===t&&(t={});const i={fn:e,priority:t.priority||0,abort:()=>{s(this,y)[y](i)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},r=s(this,a)[a].findIndex((e=>i.priority>e.priority));return-1===r?s(this,a)[a].push(i):s(this,a)[a].splice(r,0,i),i}function P(e){const t=s(this,a)[a].indexOf(e);-1!==t&&s(this,a)[a].splice(t,1)}t.RateLimitedQueue=class{constructor(e){Object.defineProperty(this,y,{value:P}),Object.defineProperty(this,m,{value:x}),Object.defineProperty(this,g,{value:S}),Object.defineProperty(this,f,{value:w}),Object.defineProperty(this,c,{value:b}),Object.defineProperty(this,n,{writable:!0,value:0}),Object.defineProperty(this,a,{writable:!0,value:[]}),Object.defineProperty(this,l,{writable:!0,value:!1}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:1}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,_,{writable:!0,value:()=>{if(s(this,l)[l])s(this,h)[h]=setTimeout(s(this,_)[_],0);else{s(this,p)[p]=this.limit,this.limit=Math.ceil((s(this,d)[d]+s(this,p)[p])/2);for(let e=s(this,p)[p];e<=this.limit;e++)s(this,f)[f]();s(this,d)[d]-s(this,p)[p]>3?s(this,h)[h]=setTimeout(s(this,_)[_],2e3):s(this,p)[p]=Math.floor(s(this,p)[p]/2)}}}),this.limit="number"!=typeof e||0===e?1/0:e}run(e,t){return!s(this,l)[l]&&s(this,n)[n]<this.limit?s(this,c)[c](e):s(this,m)[m](e,t)}wrapPromiseFunction(e,t){var s=this;return function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];let a;const l=new Promise(((i,n)=>{a=s.run((()=>{let t,s;try{s=Promise.resolve(e(...r))}catch(e){s=Promise.reject(e)}return s.then((e=>{t?n(t):(a.done(),i(e))}),(e=>{t?n(t):(a.done(),n(e))})),()=>{t=o()}}),t)}));return l.abort=()=>{a.abort()},l}}resume(){s(this,l)[l]=!1,clearTimeout(s(this,u)[u]);for(let e=0;e<this.limit;e++)s(this,f)[f]()}pause(e){void 0===e&&(e=null),s(this,l)[l]=!0,clearTimeout(s(this,u)[u]),null!=e&&(s(this,u)[u]=setTimeout(s(this,v)[v],e))}rateLimit(e){clearTimeout(s(this,h)[h]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(s(this,d)[d]=this.limit-1,this.limit=s(this,p)[p],s(this,h)[h]=setTimeout(s(this,_)[_],e))}get isPaused(){return s(this,l)[l]}};const O=Symbol("__queue");t.internalRateLimitedQueue=O},53149:(e,t,s)=>{"use strict";function i(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var r=0;function o(e){return"__private_"+r+++"_"+e}const n=s(83689);function a(e,t,s){const i=[];return e.forEach((e=>"string"!=typeof e?i.push(e):t[Symbol.split](e).forEach(((e,t,r)=>{""!==e&&i.push(e),t<r.length-1&&i.push(s)})))),i}function l(e,t){const s=/\$/g;let i=[e];if(null==t)return i;for(const e of Object.keys(t))if("_"!==e){let r=t[e];"string"==typeof r&&(r=s[Symbol.replace](r,"$$$$")),i=a(i,new RegExp(`%\\{${e}\\}`,"g"),r)}return i}var u=o("apply");function p(e){if(null==e||!e.strings)return;const t=this.locale;this.locale={...t,strings:{...t.strings,...e.strings}},this.locale.pluralize=e.pluralize||t.pluralize}e.exports=class{constructor(e){Object.defineProperty(this,u,{value:p}),this.locale={strings:{},pluralize:e=>1===e?0:1},Array.isArray(e)?e.forEach(i(this,u)[u],this):i(this,u)[u](e)}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){if(!n(this.locale.strings,e))throw new Error(`missing string: ${e}`);const s=this.locale.strings[e];if("object"==typeof s){if(t&&void 0!==t.smart_count){return l(s[this.locale.pluralize(t.smart_count)],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return l(s,t)}}},69916:(e,t,s)=>{"use strict";const i=s(93096);e.exports=i((function(e,t,s){const{progress:i,bytesUploaded:r,bytesTotal:o}=t;i&&(e.uppy.log(`Upload progress: ${i}`),e.uppy.emit("upload-progress",s,{uploader:e,bytesUploaded:r,bytesTotal:o}))}),300,{leading:!0,trailing:!0})},10104:(e,t,s)=>{"use strict";const i=s(71516);e.exports=function(){return fetch(...arguments).catch((e=>{throw"AbortError"===e.name?e:new i(e)}))}},34088:(e,t,s)=>{"use strict";const i=s(46666);e.exports=function(e,t){return void 0===t&&(t=document),"string"==typeof e?t.querySelector(e):i(e)?e:null}},76526:e=>{"use strict";function t(e){let t="";return e.replace(/[^A-Z0-9]/gi,(e=>(t+=`-${function(e){return e.charCodeAt(0).toString(32)}(e)}`,"/")))+t}e.exports=function(e){let s="uppy";return"string"==typeof e.name&&(s+=`-${t(e.name.toLowerCase())}`),void 0!==e.type&&(s+=`-${e.type}`),e.meta&&"string"==typeof e.meta.relativePath&&(s+=`-${t(e.meta.relativePath.toLowerCase())}`),void 0!==e.data.size&&(s+=`-${e.data.size}`),void 0!==e.data.lastModified&&(s+=`-${e.data.lastModified}`),s}},79655:e=>{"use strict";e.exports=function(e){const t=e.lastIndexOf(".");return-1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}},49187:(e,t,s)=>{"use strict";const i=s(79655),r=s(21582);e.exports=function(e){var t;if(e.type)return e.type;const s=e.name?null==(t=i(e.name).extension)?void 0:t.toLowerCase():null;return s&&s in r?r[s]:"application/octet-stream"}},44629:e=>{"use strict";e.exports=function(e){const t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/i.exec(e)[1];return`${/^http:\/\//i.test(e)?"ws":"wss"}://${t}`}},15589:e=>{"use strict";e.exports=function(e){for(var t;e&&!e.dir;)e=e.parentNode;return null==(t=e)?void 0:t.dir}},90152:e=>{"use strict";function t(e){return e<10?`0${e}`:e.toString()}e.exports=function(){const e=new Date;return`${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}},83689:e=>{"use strict";e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},46666:e=>{"use strict";e.exports=function(e){return(null==e?void 0:e.nodeType)===Node.ELEMENT_NODE}},48419:e=>{"use strict";e.exports=function(e){return!!e&&(0!==e.readyState&&4!==e.readyState||0===e.status)}},21582:e=>{"use strict";e.exports={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"}},67191:e=>{"use strict";e.exports=function(e){const t=[],s=[];function i(e){t.push(e)}function r(e){s.push(e)}return Promise.all(e.map((e=>e.then(i,r)))).then((()=>({successful:t,failed:s})))}},98978:(e,t,s)=>{"use strict";var i=s(62961),r=s(53145),o=s(99628);const n=s(68937),a=s(69916),l=s(44629),u=s(67191),p=s(12328),d=s(43822),h=s(71516),c=s(48419),f=s(1026);function g(e,t){let s=t;return s||(s=new Error("Upload error")),"string"==typeof s&&(s=new Error(s)),s instanceof Error||(s=Object.assign(new Error("Upload error"),{data:s})),c(e)?(s=new h(s,e),s):(s.request=e,s)}function m(e){return e.data.slice(0,e.data.size,e.meta.type)}class y extends n{constructor(e,t){super(e,t),this.type="uploader",this.id=this.opts.id||"XHRUpload",this.title="XHRUpload",this.defaultLocale=f;const s={formData:!0,fieldName:t.bundle?"files[]":"file",method:"post",metaFields:null,responseUrlFieldName:"url",bundle:!1,headers:{},timeout:3e4,limit:5,withCredentials:!1,responseType:"",getResponseData(t){let s={};try{s=JSON.parse(t)}catch(t){e.log(t)}return s},getResponseError(e,t){let s=new Error("Upload error");return c(t)&&(s=new h(s,t)),s},validateStatus:e=>e>=200&&e<300};if(this.opts={...s,...t},this.i18nInit(),this.handleUpload=this.handleUpload.bind(this),o.internalRateLimitedQueue in this.opts?this.requests=this.opts[o.internalRateLimitedQueue]:this.requests=new o.RateLimitedQueue(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");this.uploaderEvents=Object.create(null)}getOptions(e){const t=this.uppy.getState().xhrUpload,{headers:s}=this.opts,i={...this.opts,...t||{},...e.xhrUpload||{},headers:{}};return"function"==typeof s?i.headers=s(e):Object.assign(i.headers,this.opts.headers),t&&Object.assign(i.headers,t.headers),e.xhrUpload&&Object.assign(i.headers,e.xhrUpload.headers),i}addMetadata(e,t,s){(Array.isArray(s.metaFields)?s.metaFields:Object.keys(t)).forEach((s=>{e.append(s,t[s])}))}createFormDataUpload(e,t){const s=new FormData;this.addMetadata(s,e.meta,t);const i=m(e);return e.name?s.append(t.fieldName,i,e.meta.name):s.append(t.fieldName,i),s}createBundledUpload(e,t){const s=new FormData,{meta:i}=this.uppy.getState();return this.addMetadata(s,i,t),e.forEach((e=>{const t=this.getOptions(e),i=m(e);e.name?s.append(t.fieldName,i,e.name):s.append(t.fieldName,i)})),s}upload(e,t,s){const r=this.getOptions(e);return this.uppy.log(`uploading ${t} of ${s}`),new Promise(((t,s)=>{this.uppy.emit("upload-started",e);const o=r.formData?this.createFormDataUpload(e,r):e.data,n=new XMLHttpRequest;let a;this.uploaderEvents[e.id]=new p(this.uppy);const l=new d(r.timeout,(()=>{n.abort(),a.done();const t=new Error(this.i18n("timedOut",{seconds:Math.ceil(r.timeout/1e3)}));this.uppy.emit("upload-error",e,t),s(t)})),u=(0,i.nanoid)();n.upload.addEventListener("loadstart",(()=>{this.uppy.log(`[XHRUpload] ${u} started`)})),n.upload.addEventListener("progress",(t=>{this.uppy.log(`[XHRUpload] ${u} progress: ${t.loaded} / ${t.total}`),l.progress(),t.lengthComputable&&this.uppy.emit("upload-progress",e,{uploader:this,bytesUploaded:t.loaded,bytesTotal:t.total})})),n.addEventListener("load",(i=>{if(this.uppy.log(`[XHRUpload] ${u} finished`),l.done(),a.done(),this.uploaderEvents[e.id]&&(this.uploaderEvents[e.id].remove(),this.uploaderEvents[e.id]=null),r.validateStatus(i.target.status,n.responseText,n)){const s=r.getResponseData(n.responseText,n),o=s[r.responseUrlFieldName],a={status:i.target.status,body:s,uploadURL:o};return this.uppy.emit("upload-success",e,a),o&&this.uppy.log(`Download ${e.name} from ${o}`),t(e)}const o=r.getResponseData(n.responseText,n),p=g(n,r.getResponseError(n.responseText,n)),d={status:i.target.status,body:o};return this.uppy.emit("upload-error",e,p,d),s(p)})),n.addEventListener("error",(()=>{this.uppy.log(`[XHRUpload] ${u} errored`),l.done(),a.done(),this.uploaderEvents[e.id]&&(this.uploaderEvents[e.id].remove(),this.uploaderEvents[e.id]=null);const t=g(n,r.getResponseError(n.responseText,n));return this.uppy.emit("upload-error",e,t),s(t)})),n.open(r.method.toUpperCase(),r.endpoint,!0),n.withCredentials=r.withCredentials,""!==r.responseType&&(n.responseType=r.responseType),a=this.requests.run((()=>{this.uppy.emit("upload-started",e);const t=this.getOptions(e);return Object.keys(t.headers).forEach((e=>{n.setRequestHeader(e,t.headers[e])})),n.send(o),()=>{l.done(),n.abort()}})),this.onFileRemove(e.id,(()=>{a.abort(),s(new Error("File removed"))})),this.onCancelAll(e.id,(e=>{let{reason:t}=e;"user"===t&&a.abort(),s(new Error("Upload cancelled"))}))}))}uploadRemote(e){const t=this.getOptions(e);return new Promise(((s,i)=>{this.uppy.emit("upload-started",e);const o={};(Array.isArray(t.metaFields)?t.metaFields:Object.keys(e.meta)).forEach((t=>{o[t]=e.meta[t]}));new(e.remote.providerOptions.provider?r.Provider:r.RequestClient)(this.uppy,e.remote.providerOptions).post(e.remote.url,{...e.remote.body,endpoint:t.endpoint,size:e.data.size,fieldname:t.fieldName,metadata:o,httpMethod:t.method,useFormData:t.formData,headers:t.headers}).then((o=>{const{token:n}=o,u=l(e.remote.companionUrl),d=new r.Socket({target:`${u}/api/${n}`,autoOpen:!1});let h;this.uploaderEvents[e.id]=new p(this.uppy),this.onFileRemove(e.id,(()=>{d.send("cancel",{}),h.abort(),s(`upload ${e.id} was removed`)})),this.onCancelAll(e.id,(function(t){let{reason:i}=void 0===t?{}:t;"user"===i&&(d.send("cancel",{}),h.abort()),s(`upload ${e.id} was canceled`)})),this.onRetry(e.id,(()=>{d.send("pause",{}),d.send("resume",{})})),this.onRetryAll(e.id,(()=>{d.send("pause",{}),d.send("resume",{})})),d.on("progress",(t=>a(this,t,e))),d.on("success",(i=>{const r=t.getResponseData(i.response.responseText,i.response),o=r[t.responseUrlFieldName],n={status:i.response.status,body:r,uploadURL:o};return this.uppy.emit("upload-success",e,n),h.done(),this.uploaderEvents[e.id]&&(this.uploaderEvents[e.id].remove(),this.uploaderEvents[e.id]=null),s()})),d.on("error",(s=>{const r=s.response,o=r?t.getResponseError(r.responseText,r):Object.assign(new Error(s.error.message),{cause:s.error});this.uppy.emit("upload-error",e,o),h.done(),this.uploaderEvents[e.id]&&(this.uploaderEvents[e.id].remove(),this.uploaderEvents[e.id]=null),i(o)})),h=this.requests.run((()=>(d.open(),e.isPaused&&d.send("pause",{}),()=>d.close())))})).catch((t=>{this.uppy.emit("upload-error",e,t),i(t)}))}))}uploadBundle(e){return new Promise(((t,s)=>{const{endpoint:i}=this.opts,{method:r}=this.opts,o=this.uppy.getState().xhrUpload,n=this.createBundledUpload(e,{...this.opts,...o||{}}),a=new XMLHttpRequest,l=t=>{e.forEach((e=>{this.uppy.emit("upload-error",e,t)}))},u=new d(this.opts.timeout,(()=>{a.abort();const e=new Error(this.i18n("timedOut",{seconds:Math.ceil(this.opts.timeout/1e3)}));l(e),s(e)}));a.upload.addEventListener("loadstart",(()=>{this.uppy.log("[XHRUpload] started uploading bundle"),u.progress()})),a.upload.addEventListener("progress",(t=>{u.progress(),t.lengthComputable&&e.forEach((e=>{this.uppy.emit("upload-progress",e,{uploader:this,bytesUploaded:t.loaded/t.total*e.size,bytesTotal:e.size})}))})),a.addEventListener("load",(i=>{if(u.done(),this.opts.validateStatus(i.target.status,a.responseText,a)){const s=this.opts.getResponseData(a.responseText,a),r={status:i.target.status,body:s};return e.forEach((e=>{this.uppy.emit("upload-success",e,r)})),t()}const r=this.opts.getResponseError(a.responseText,a)||new Error("Upload error");return r.request=a,l(r),s(r)})),a.addEventListener("error",(()=>{u.done();const e=this.opts.getResponseError(a.responseText,a)||new Error("Upload error");return l(e),s(e)})),this.uppy.on("cancel-all",(function(e){let{reason:t}=void 0===e?{}:e;"user"===t&&(u.done(),a.abort())})),a.open(r.toUpperCase(),i,!0),a.withCredentials=this.opts.withCredentials,""!==this.opts.responseType&&(a.responseType=this.opts.responseType),Object.keys(this.opts.headers).forEach((e=>{a.setRequestHeader(e,this.opts.headers[e])})),a.send(n),e.forEach((e=>{this.uppy.emit("upload-started",e)}))}))}uploadFiles(e){const t=e.map(((t,s)=>{const i=parseInt(s,10)+1,r=e.length;return t.error?Promise.reject(new Error(t.error)):t.isRemote?this.uploadRemote(t,i,r):this.upload(t,i,r)}));return u(t)}onFileRemove(e,t){this.uploaderEvents[e].on("file-removed",(s=>{e===s.id&&t(s.id)}))}onRetry(e,t){this.uploaderEvents[e].on("upload-retry",(s=>{e===s&&t()}))}onRetryAll(e,t){this.uploaderEvents[e].on("retry-all",(()=>{this.uppy.getFile(e)&&t()}))}onCancelAll(e,t){var s=this;this.uploaderEvents[e].on("cancel-all",(function(){s.uppy.getFile(e)&&t(...arguments)}))}handleUpload(e){if(0===e.length)return this.uppy.log("[XHRUpload] No files to upload!"),Promise.resolve();0!==this.opts.limit||this.opts[o.internalRateLimitedQueue]||this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");const t=e.map((e=>this.uppy.getFile(e)));if(this.opts.bundle){if(t.some((e=>e.isRemote)))throw new Error("Canâ€™t upload remote files when the `bundle: true` option is set");if("function"==typeof this.opts.headers)throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");return this.uploadBundle(t)}return this.uploadFiles(t).then((()=>null))}install(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!1}})}this.uppy.addUploader(this.handleUpload)}uninstall(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!0}})}this.uppy.removeUploader(this.handleUpload)}}y.VERSION="2.1.0",e.exports=y},1026:e=>{"use strict";e.exports={strings:{timedOut:"Upload stalled for %{seconds} seconds, aborting."}}},62961:e=>{e.exports={nanoid:(e=21)=>{let t="",s=e;for(;s--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(s=t)=>{let i="",r=s;for(;r--;)i+=e[Math.random()*e.length|0];return i}}}}]);